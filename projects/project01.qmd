---
title: "PrÃ ctica 01: ManipulaciÃ³ de Cadenes de CarÃ cters en C"
lang: ca
---

## ğŸ¯ Objectius

- Entendre i implementar les funcions  per operar amb strings (char *) en C.
- Aprendre a gestionar la memÃ²ria dinÃ mica de manera segura i eficient amb `malloc`, `calloc`, `realloc` i `free`.
- Dissenyar i implementar llibreries modulars i reutilitzables.
- Aplicar bones prÃ ctiques de programaciÃ³ per assegurar la qualitat del codi.

## ğŸ› ï¸ Entorn de Desenvolupament

- Llenguatge de programaciÃ³: C (estÃ ndard C99 o superior).
- Compilador: `gcc`.
- Eina de construcciÃ³: `make`.
- VM amb Debian.

## ğŸ—‚ï¸ Estructura del Projecte

El projecte es pot realitzar amb grups de fins a 3 persones. Per obtenir el repositori del projecte, heu d'acceptar l'activitat del [Github Classroom](https://classroom.github.com/a/XZA9JXsb). Un cop acceptada, el primer membre assignarÃ  un nom a l'equip i la restants membres s'hi podran afegir. Un cop fet aixÃ², cada membre haurÃ  de clonar el repositori al seu entorn local.

La segÃ¼ent Ã©s l'estructura bÃ sica del projecte:

```bash
â”œâ”€â”€ build            
â”‚   â”œâ”€â”€ ohmy_string.o
â”‚   â””â”€â”€ test_ohmystring
â”œâ”€â”€ include           
â”‚   â”œâ”€â”€ ohmy_string.h
â”‚   â””â”€â”€ safe_string.h
â”œâ”€â”€ Makefile          
â”œâ”€â”€ README.md         
â”œâ”€â”€ samples           
â”œâ”€â”€ src               
â”‚   â””â”€â”€ string
â”‚       â”œâ”€â”€ ohmy_string.c
â”‚       â””â”€â”€ safe_string.c
â””â”€â”€ tests             
    â”œâ”€â”€ graded_test.c
    â”œâ”€â”€ graded_test.h
    â”œâ”€â”€ test_ohmystring.c
    â””â”€â”€ test_safestring.c
```

:::{.callout-important title="No modifiqueu els fitxers de tests"}
Els fitxers de tests no s'han de modificar. Aquests fitxers contenen proves automÃ tiques que s'executaran per verificar la funcionalitat de les llibreries i programes.
:::

## ğŸ“œ Tasques a realitzar

### Llibreria `ohmy_string.h`

Aquesta llibreria ha de replicar les funcionalitats bÃ siques de la llibreria estÃ ndard `string.h`, implementant funcions com `strlen`, `strcpy`, `strcat`, `strcmp`, entre altres, sense utilitzar cap funciÃ³ de la llibreria estÃ ndard. 

```c 
char *ohmy_strcpy(char *dest, const char *src);
char *ohmy_strncpy(char *dest, const char *src, size_t n);
char *ohmy_strcat(char *dest, const char *src);
char *ohmy_strncat(char *dest, const char *src, size_t n);
size_t ohmy_strlen(const char *s);
int ohmy_strcmp(const char *s1, const char *s2);
int ohmy_strncmp(const char *s1, const char *s2, size_t n);
char *ohmy_strchr(const char *s, int c);
char *ohmy_strrchr(const char *s, int c);
char *ohmy_strstr(const char *haystack, const char *needle);
char *ohmy_strrstr(const char *haystack, const char *needle);
void *ohmy_memcpy(void *dest, const void *src, size_t n);
void *ohmy_memmove(void *dest, const void *src, size_t n);
void *ohmy_memset(void *s, int c, size_t n);
int ohmy_memcmp(const void *s1, const void *s2, size_t n);
```

- Implementeu totes les funcions del fitxer d'encapÃ§alament `ohmy_string.h` a `ohmy_string.c`. Com a referÃ¨ncia, podeu consultar la documentaciÃ³ oficial del manual de C per a la llibreria `string.h` o bÃ© les referÃ¨ncies de la llibreria [musl libc](https://elixir.bootlin.com/musl/v1.2.5/source/src/string).
- No es permet l'Ãºs de cap funciÃ³ de la llibreria estÃ ndard `string.h` dins de la implementaciÃ³.
- No es pot incloure cap altra llibreria a `ohmy_string.c` ni a `ohmy_string.h`, excepte les necessÃ ries per a la definiciÃ³ de tipus bÃ sics (com `stddef.h` per a `size_t`(i opcionalment `stdint.h` o `limits.h` si ho necessiteu per constants o tipus bÃ sics)).
- Implementar un conjunt de programes simples que utilitzin les funcions de la llibreria per demostrar-ne el funcionament. Aquests programes s'han de colÂ·locar a la carpeta `samples/`.
- Pots verificar la funcionalitat de la llibreria mitjanÃ§ant la comanda de test: `make test_ohmy`. Aquesta comanda compilarÃ  i executarÃ  els tests automÃ tics definits a `tests/test_ohmystring.c`. 

### Llibreria `safe_string.h`

Aquest apartat implica el disseny i implementaciÃ³ d'un nou tipus de dada **SafeString** (o similar) que gestioni cadenes de carÃ cters de manera segura. Aquest nou tipus ha d'abordar problemes comuns com desbordaments de bÃºfer, gestiÃ³ de memÃ²ria i accÃ©s no controlat, problemes habituals quan es treballa amb cadenes dinÃ miques en C.

Per exemple, l'Ãºs de la llibreria `safe_string.h` no hauria de permetre:

1. Desbordaments de bÃºfer

    ```c
    char buffer[10];
    strcpy(buffer, "Aquesta cadena Ã©s massa llarga per al buffer");
    ```

2. Fugues de memÃ²ria

    ```c
    char *str = malloc(100);
    // ... Ãºs de str
    // Oblidem alliberar la memÃ²ria
    ```

3. Accessos fora de lÃ­mits

    ```c
    char *str = malloc(10);
    str[10] = 'A'; // AccÃ©s fora de lÃ­mits
    ```

El tipus **SafeString** ha de ser una estructura que gestioni el seu propi estat. Ha de contenir, almenys, els segÃ¼ents camps:

- Punter al buffer de carÃ cters.
- Longitud actual de la cadena.
- Capacitat total del buffer assignat (la mida mÃ xima actual).

Aquesta estructura ha de ser opaca, Ã©s a dir, els usuaris de la llibreria no han de poder accedir directament als seus camps. En lloc d'aixÃ², han d'utilitzar les funcions proporcionades per la llibreria per interactuar amb les cadenes. La llibreria no pot exposar cap camp pÃºblic que permeti l'accÃ©s directe a la memÃ²ria interna. Tota operaciÃ³ de modificaciÃ³ (afegir, inserir) ha de comprovar la capacitat i redimensionar l'espai (realloc) si cal.


- Implementeu totes les funcions del fitxer d'encapÃ§alament `safe_string.h` a `safe_string.c`.
- Heu de fer Ãºs de la llibreria `string.h` per a les operacions internes amb cadenes.
- Podeu incloure altres llibreries estÃ ndard si Ã©s necessari (com `stdlib.h` per a la gestiÃ³ de memÃ²ria).
- Implementar un conjunt de programes simples que utilitzin les funcions de la llibreria per demostrar-ne el funcionament. Aquests programes s'han de colÂ·locar a la carpeta `samples/`.
- Pots verificar la funcionalitat de la llibreria mitjanÃ§ant la comanda de test: `make test_safe`. Aquesta comanda compilarÃ  i executarÃ  els tests automÃ tics definits a `tests/test_safestring.c`.


### ConfiguraciÃ³ del Makefile

El `Makefile` ha de permetre compilar les dues llibreries (`ohmy_string` i `safe_string`), aixÃ­ com els programes de test i els exemples. La versiÃ³ inicial del `Makefile` ja estÃ  proporcionada, perÃ² no estÃ  completa per als programes de la carpeta `samples/`. La resta de funcionalitats del `Makefile` esta implementada, incloent la compilaciÃ³ de les llibreries i els tests automÃ tics. Cal afegir les regles necessÃ ries per compilar i executar els programes de la carpeta `samples`.


## ğŸ’¯ AvaluaciÃ³ i Criteris de Qualitat

Per avaluar el projecte, es tindran en compte els segÃ¼ents aspectes:

| Aspecte                        | PuntuaciÃ³ MÃ xima |
|--------------------------------|------------------|
| `ohmy_string`                  | 25%              |
| `safe_string`                  | 25%              |
| `samples`                      | 10%              |
| `Makefile`                     | 10%              |
| `DocumentaciÃ³`                 | 10%              |
| `Qualitat del Codi`            | 20%              |

- `ohmy_string`: S'avaluarÃ  a travÃ©s dels tests automÃ tics proporcionats. Si es passen tots els tests, s'obtindrÃ  la puntuaciÃ³ completa. Si no, es donarÃ  una puntuaciÃ³ proporcional al nombre de tests superats.
- `safe_string`: Igual que per `ohmy_string`, s'avaluarÃ  a travÃ©s dels tests automÃ tics proporcionats.
- `samples`: S'avaluarÃ  la qualitat, simplicitat i creativitat dels exemples proporcionats a la carpeta `samples/`.
- `Makefile`: S'avaluarÃ  la correcta configuraciÃ³ del `Makefile`, assegurant que compili totes les parts del projecte de manera eficient i sense errors.
- `DocumentaciÃ³`: S'avaluarÃ  la profesionalitat i el contingut del fitxer `README.md`, assegurant que explica:
  -  Com compilar i executar el projecte.
  -  Com utilitzar les llibreries.
  -  Exemples d'Ãºs de les llibreries.
  -  DistribuciÃ³ de tasques entre els membres de l'equip (si escau).
- `Qualitat del Codi`: 
  - Evitar l'Ãºs de funcions repetides o codi duplicat innecessÃ riament.
  - Codi net i ben estructurat.
  - CompilaciÃ³ sense warnings.
  - GestiÃ³ correcta de la memÃ²ria (sense fugues ni accessos fora de lÃ­mits).
  - Ãšs adequat de comentaris i noms de variables descriptius.
  - DocumentaciÃ³ basada en estÃ ndards com Doxygen (opcional perÃ² recomanat).
  - Ãšs adequat de commits en Git, amb missatges clars i descriptius.
  - GestiÃ³ d'issues.
  - GeneraciÃ³ de `realease` al repositori GitHub amb la versiÃ³ final del projecte.


## ğŸ“¦ Lliurament

Tot el codi i els fitxers del projecte s'han de pujar al repositori GitHub assignat per a la prÃ ctica. Ã‰s imprescindible assegurar-se que l'execuciÃ³ de la comanda `make` compili tot el projecte sense errors ni warnings i que tots els tests automÃ tics s'hagin superat correctament. Es valorarÃ  Ãºnicament el codi de la branca principal (`main` o `master`). 

Per formalitzar el lliurament al Campus Virtual, copieu i enganxeu el text corresponent a la caixa de text de lliurament del Campus:

```text
Individual o Grupal: [Indicar si Ã©s Individual o Grupal]
<Si Grupal>
Membres: [Llista de Noms, incloent el teu]
Team: [Nom del Team al Classroom]
```

---
> Happy Coding! ğŸš€


 



