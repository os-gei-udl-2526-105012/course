<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.26">

  <meta name="author" content="Jordi Mateo Forn√©s">
  <title>SO - Fall 2025 ‚Äì Planificaci√≥ de processos</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-534cd8e3a96973385dffff3f4709048d.css">
  <link rel="stylesheet" href="styles.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../site_libs/quarto-diagram/mermaid.min.js"></script>
  <script src="../site_libs/quarto-diagram/mermaid-init.js"></script>
  <link href="../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Planificaci√≥ de processos</h1>
  <p class="subtitle">Unitat 4 ¬∑ Sistemes Operatius (SO)</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jordi Mateo Forn√©s 
</div>
</div>
</div>

</section>
<section>
<section id="conceptes-b√†sics" class="title-slide slide level1 center">
<h1>Conceptes b√†sics</h1>

</section>
<section id="necessitat-dun-proc√©s" class="slide level2">
<h2>Necessitat d‚Äôun proc√©s</h2>
<p>Els <strong>processos</strong> presenten necessitats variades a l‚Äôhora d‚Äôutilitzar els recursos del sistema. En general, la majoria dels processos passen per <strong>cicles de burst</strong>, alternant entre per√≠odes d‚Äôactivitat <em>intensiva d‚Äô√∫s del processador (CPU)</em> i per√≠odes d‚Äôactivitat <em>d‚Äôentrada/sortida (E/S)</em>.</p>

<img data-src="../figures/slides/04-sched/cicle-burst.png" class="r-stretch"></section>
<section id="situaci√≥-1-executant-un-proc√©s" class="slide level2">
<h2>Situaci√≥ 1: Executant un proc√©s</h2>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Obrint el firefox</strong></p>
</div>
<div class="callout-content">
<p>Assumiu un sistema Linux on volem executar √∫nicament Firefox, assumint que la resta de processos del sistema operatiu s‚Äôexecuten en un altre processador.</p>
</div>
</div>
</div>

<img data-src="../figures/slides/04-sched/scheduling-intro-01.png" class="r-stretch"><aside class="notes">
<p>Assumim un sistema operatiu amb un sol processador on un usuari vol executa el proc√©s Firefox. En aquest escenari, el sistema operatiu ha de de gestionar la Mem√≤ria Principal, el Processador i el disc. Per fer-ho, l‚Äôusuari obre l‚Äôaplicaci√≥ Firefox des de l‚Äôespai d‚Äôusuari i el sistema operatiu gestiona la seva execuci√≥ en l‚Äôespai del nucli. Per simplificar, considerarem que tots els processos del sistema operatiu s‚Äôexecuten en un altre processador, i que el nucli del sistema operatiu no es veu afectat per la c√†rrega de treball de l‚Äôusuari.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="situaci√≥-1-accions-del-so" class="slide level2">
<h2>Situaci√≥ 1: Accions del SO</h2>

<img data-src="../figures/slides/04-sched/scheduling-intro-02.png" class="r-stretch"><div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Resum</strong></p>
</div>
<div class="callout-content">
<p>El SO (1) Carrega a Mem√≤ria Principal. (2) El planificador selecciona el proc√©s. (3) Despatxa a la CPU. (4) L‚Äôusuari interactua amb l‚Äôaplicaci√≥.</p>
</div>
</div>
</div>
<aside class="notes">
<p>Per executar l‚ÄôAplicaci√≥ 1 (APP1), el sistema operatiu realitza les seg√ºents accions:</p>
<ol type="1">
<li><strong>Carrega el proc√©s (APP1) a la Mem√≤ria Principal.</strong> (Indicat amb el n√∫mero 1 a la imatge)</li>
<li><strong>El Planificador despatxa APP1 al Processador.</strong> (Pas conceptual que porta del n√∫mero 2 al 3 a la imatge)</li>
<li><strong>L‚Äôusuari interactua amb APP1.</strong> (Representat a l‚ÄôEspai Usuari amb el n√∫mero 4)</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="situaci√≥-1-execuci√≥-concurrent" class="slide level2">
<h2>Situaci√≥ 1: Execuci√≥ Concurrent</h2>

<img data-src="../figures/slides/04-sched/scheduling-intro-03.png" class="r-stretch"><aside class="notes">
<p>Imaginem ara que apareix una segona aplicaci√≥ (APP2) mentre APP1 encara s‚Äôest√† executant o est√† a la mem√≤ria principal. En un sistema monoprogramat, APP2 hauria d‚Äôesperar que APP1 finalitzi per poder comen√ßar la seva execuci√≥.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="mono-vs.-multiprogramaci√≥" class="slide level2">
<h2>Mono vs.&nbsp;Multiprogramaci√≥</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Qu√® Succeeix?</strong></p>
</div>
<div class="callout-content">
<p>Qu√® passa en aquest escenari si el sistema operatiu √©s <strong>monoprogramat</strong>? I si √©s <strong>multiprogramat</strong>? Pensa en com es gestionarien APP1 i APP2 en cada cas.</p>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li class="fragment"><strong>Monoprogramat:</strong> Nom√©s un proc√©s a la mem√≤ria. APP2 ha d‚Äôesperar que APP1 acabi.</li>
<li class="fragment"><strong>Multiprogramat:</strong> M√∫ltiples processos a la mem√≤ria. APP2 pot ser carregat i executat mentre APP1 est√† en espera o en execuci√≥.</li>
</ul>
</div>
<aside class="notes">
<p>En un sistema monoprogramat, fins que APP1 no finalitza, cap altra aplicaci√≥ pot utilitzar el processador de manera activa. Per tant APP1 i APP2 no poden conviure en mem√≤ria de forma concurrent. En canvi, en un sistema multiprogramat si.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="sistema-multiprogramat" class="slide level2">
<h2>Sistema Multiprogramat</h2>

<img data-src="../figures/slides/04-sched/scheduling-intro-04.png" class="r-stretch"><aside class="notes">
<p>En un sistema operatiu <strong>multiprogramat</strong>, com els que utilitzem actualment, ambdues aplicacions (APP1 i APP2) es carreguen a la Mem√≤ria Principal, dins l‚Äôespai d‚Äôadreces de l‚Äôusuari.</p>
<p>El <strong>Planificador</strong> (representat amb el signe d‚Äôinterrogaci√≥, indicant la seva decisi√≥) utilitza un algorisme per decidir quin proc√©s (APP1 o APP2) s‚Äôexecutar√† al <strong>Processador</strong> en un moment donat.</p>
<p>Aquest proc√©s de decisi√≥ es repeteix cont√≠nuament. Un proc√©s pot sortir del processador i tornar a la Mem√≤ria Principal i un altre proc√©s pot deixar la Mem√≤ria Principal per accedir al processador.</p>
<p>D‚Äôaquesta manera, es crea la <strong>concurr√®ncia</strong>: ambdues aplicacions semblen executar-se alhora des de la perspectiva de l‚Äôusuari, permetent una utilitzaci√≥ m√©s eficient dels recursos del sistema i una millor experi√®ncia d‚Äôusuari.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="quin-√©s-lobjectiu-de-la-planificaci√≥" class="slide level2">
<h2>Quin √©s l‚Äôobjectiu de la planificaci√≥?</h2>

<img data-src="../figures/slides/04-sched/scheduling-sched-obj.png" class="r-stretch"><aside class="notes">
<p>Com que hi ha m√∫ltiples processos a mem√≤ria per√≤ la CPU nom√©s pot executar-ne un a la vegada, el sistema operatiu utilitza un algorisme de planificaci√≥ per decidir:</p>
<div class="non-incremental">
<ol type="1">
<li>Quin proc√©s s‚Äôexecuta (i quin espera).</li>
<li>En quin ordre s‚Äôassignen els recursos.</li>
</ol>
<ul>
<li><strong>Maximitzar l‚Äô√∫s dels recursos computacionals</strong> (CPU, mem√≤ria, disc, xarxa, etc.).</li>
<li><strong>Minimitzar el temps d‚Äôespera dels processos</strong>, garantint que els usuaris puguin executar tasques de manera eficient i r√†pida.</li>
</ul>
</div>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="com-funciona-el-planificador" class="slide level2">
<h2>Com funciona el planificador?</h2>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">classDiagram
    direction LR

    class Scheduler {
        +selectProcess() Process
        +dispatch()
        +handleInterrupt(Interrupci√≥)
    }

    class ReadyQueue {
        +enqueue(Process)
        +dequeue() Process
        +sortBy()
        +processes: Process[]
    }

    class Process {
        +pid: int
        +priority: int
        +state: ProcessState
        +pcb: PCB
        +execute()
        +requestIO(IODevice)
        +yield()
    }

    class PCB {
        +context: Context
        +memoryInfo: MemoryInfo
        +ioInfo: IOInfo[]
        +saveContext()
        +loadContext()
    }

    class CPU {
        +currentProcess: Process
        +executeCycle()
        +raiseInterrupt(Interrupci√≥)
    }

    class IODevice {
        +deviceId: int
        +startIO(Process)
        +completeIO(int eventId)
    }

    class Interrupci√≥ {
        TIMER
        IO_COMPLETION
        SYSCALL
        ERROR
    }


    Scheduler --&gt; ReadyQueue: selecciona
    Scheduler --&gt; Despatxador: utilitza

    Despatxador --&gt; CPU: controla
    Despatxador --&gt; PCB: gestiona

    ReadyQueue "1" --&gt; "*" Process: cont√©

    CPU --&gt; Process: executa 0..1 
    CPU --&gt; Interrupci√≥: genera
    CPU --&gt; Scheduler: notifica

    IODevice --&gt; Process: bloqueja/desbloqueja
    IODevice --&gt; Interrupci√≥: genera
    IODevice --&gt; Scheduler: notifica

    Process --&gt; PCB: t√©
    Process --&gt; CPU: s'executa
    Process --&gt; IODevice: sol¬∑licita


</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="quan-sha-de-planificar" class="slide level2">
<h2>Quan s‚Äôha de planificar?</h2>

<img data-src="../figures/slides/04-sched/scheduling-trigger-decision.png" class="r-stretch"><div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>El planificador s‚Äôexecuta:</strong></p>
</div>
<div class="callout-content">
<p>En resposta a interrupcions o esdeveniments: a) <strong>Interrupcions de rellotge</strong>, b) <strong>Crides al sistema</strong>, c) <strong>Finalitzaci√≥ d‚Äôoperacions d‚ÄôE/S</strong>.</p>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>Interrupcions de rellotge (timer interrupts): Periodiques, per permetre el temps compartit.</li>
<li>Crides al sistema: Quan un proc√©s sol¬∑licita un recurs o canvia el seu estat.</li>
<li>Finalitzaci√≥ d‚Äôoperacions d‚ÄôE/S: Quan un dispositiu completa una operaci√≥ per a un proc√©s en espera.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="qu√®-√©s-lapropiaci√≥" class="slide level2">
<h2>Qu√® √©s l‚Äôapropiaci√≥?</h2>

<img data-src="../figures/slides/04-sched/scheduling-sched-preemption.png" class="r-stretch"><div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Observacions</strong></p>
</div>
<div class="callout-content">
<ol type="1">
<li class="fragment">‚Üë <em>complexitat</em> del SO ‚Üí <strong>Canvi de contexts</strong>.</li>
<li class="fragment">‚Üë <em>cost</em> ‚Üí Interrupcions peri√≤diques.</li>
<li class="fragment">‚Üë la justicia i l‚Äôequitat.</li>
</ol>
</div>
</div>
</div>
</section>
<section id="criteris-de-planificaci√≥-generals" class="slide level2">
<h2>Criteris de planificaci√≥ (Generals)</h2>
<ul>
<li class="fragment"><strong>Just√≠cia</strong> Acc√©s equitatiu als recursos per a tots els processos.</li>
<li class="fragment"><strong>Equilibri</strong> Totes les parts del sistema estiguin utilitzades.</li>
<li class="fragment"><strong>Prioritzaci√≥</strong>: Prefer√®ncia a processos amb m√©s urg√®ncia.</li>
</ul>
</section>
<section id="criteris-de-planificaci√≥-en-lot" class="slide level2">
<h2>Criteris de planificaci√≥ (En lot)</h2>
<ul>
<li class="fragment"><strong>Utilitzaci√≥ de la CPU</strong>: % de temps d‚Äôocupaci√≥.</li>
<li class="fragment"><strong>Productivitat</strong>: N¬∫ de processos completats per unitat de temps.</li>
<li class="fragment"><strong>Temps de retorn</strong>: Temps total des que un proc√©s s‚Äôenvia fins que es completa, incloent temps d‚Äôespera i execuci√≥.</li>
</ul>
</section>
<section id="criteris-de-planificaci√≥-interactius" class="slide level2">
<h2>Criteris de planificaci√≥ (Interactius)</h2>
<ul>
<li class="fragment"><strong>Temps d‚Äôespera</strong>: Temps que un proc√©s roman a la cua de preparats.</li>
<li class="fragment"><strong>Temps de resposta</strong>: Temps entre una sol¬∑licitud de l‚Äôusuari i la primera resposta.</li>
</ul>
</section>
<section id="criteris-de-planificaci√≥-temps-real" class="slide level2">
<h2>Criteris de planificaci√≥ (Temps real)</h2>
<ul>
<li class="fragment"><strong>Predictibilitat</strong>: Capacitat del sistema per complir els requisits temporals de manera sistem√†tica.</li>
<li class="fragment"><strong>Deadline</strong>: Capacitat de garantir que els processos finalitzin abans d‚Äôun temps l√≠mit establert.</li>
</ul>
</section>
<section id="minimitzar-el-temps-de-resposta" class="slide level2">
<h2>Minimitzar el temps de resposta</h2>
<ul>
<li class="fragment">Minimitzar el temps transcorregut per completar una operaci√≥.</li>
<li class="fragment">Minimitzar el temps que l‚Äôusuari percep.
<ul>
<li class="fragment">Temps per mostrar una tecla en un editor.</li>
<li class="fragment">Temps per compilar un programa.</li>
<li class="fragment">Tasques en temps real: complir terminis imposats per l‚Äôentorn.</li>
</ul></li>
</ul>
</section>
<section id="maximitzar-el-rendiment" class="slide level2">
<h2>Maximitzar el rendiment</h2>
<ul>
<li class="fragment">Maximitzar les operacions per segon.</li>
<li class="fragment">Relacionat amb el temps de resposta, per√≤ no id√®ntic.
<ul>
<li class="fragment">Minimitzar el temps de resposta pot portar a m√©s canvis de context que si nom√©s es maximitza el rendiment.</li>
</ul></li>
<li class="fragment">Dos aspectes per maximitzar el rendiment:
<ul>
<li class="fragment">Minimitzar la sobrec√†rrega (per exemple, canvis de context).</li>
<li class="fragment">√ös eficient dels recursos (CPU, disc, mem√≤ria, etc).</li>
</ul></li>
</ul>
</section>
<section id="just√≠cia" class="slide level2">
<h2>Just√≠cia</h2>
<ul>
<li class="fragment">Compartir la CPU entre els usuaris de manera equitativa.</li>
<li class="fragment">La just√≠cia no √©s minimitzar el temps de resposta mitj√†.
<ul>
<li class="fragment">Reduir el temps de resposta mitj√† pot comportar en alguns casos planificacions injustes.</li>
</ul></li>
</ul>
</section>
<section id="planificaci√≥-√≤ptima" class="slide level2">
<h2>Planificaci√≥ √≤ptima</h2>
<ul>
<li class="fragment"><p>No existeix cap pol√≠tica <strong>√≤ptima</strong> que permeti satisfer tots els criteris anteriors al mateix temps.</p></li>
<li class="fragment"><p>Un algorisme pot <em>maximitzar</em> el <strong>throughput</strong> per√≤ no <em>minimitzar</em> el <strong>temps de resposta</strong>.</p></li>
</ul>
<div class="center-container fragment">
<p>La selecci√≥ de l‚Äôalgorisme de planificaci√≥ dep√®n dels objectius espec√≠fics del sistema i de la c√†rrega de treball que s‚Äôespera gestionar.</p>
</div>
<aside class="notes">
<p>Imagina un conjunt de tasques curtes i llargues, si sempre seleccionem les curtes optimitzarem el <strong>throughput</strong> per√≤ a cost del <strong>temps de resposta</strong>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="algorismes-de-planificaci√≥" class="title-slide slide level1 center">
<h1>Algorismes de planificaci√≥</h1>

</section>
<section id="fcfs---first-come-first-served" class="slide level2">
<h2>FCFS - First-Come, First-Served</h2>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    classDef iniciFi fill:#00A896,color:white,stroke:#007D6C,stroke-width:2px,font-size:22px;
    classDef decisio fill:#C46B9E,color:white,stroke:#963D6D,stroke-width:2px,font-size:22px;
    classDef proces fill:#fff,color:#333,stroke:#00A896,stroke-width:2px,font-size:22px;

    A([Inici]):::iniciFi --&gt; B{Hi ha&lt;br&gt;processos&lt;br&gt;pendents?}:::decisio
    B --&gt;|S√≠| C[[Ordenar per&lt;br&gt;arribada]]:::proces
    C --&gt; D[[Executar&lt;br&gt;fins finalitzaci√≥]]:::proces
    D --&gt; E{Tots&lt;br&gt;executats?}:::decisio
    E --&gt;|No| C
    E --&gt;|S√≠| F([Fi]):::iniciFi
    B --&gt;|No| F

    linkStyle default stroke:#666, arrowhead:vee;
    style A text-align:center;
    style B text-align:center;
    style C text-align:center;
    style D text-align:center;
    style E text-align:center;
    style F text-align:center;
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<aside class="notes">
<p>L‚Äôalgorisme FCFS √©s un dels m√©s senzills: funciona com una cua de persones; el primer que arriba √©s el primer que s‚Äôat√©n. Els processos s‚Äôexecuten en l‚Äôordre d‚Äôarribada, sense considerar prioritat ni durada del burst. Adequat per sistemes previsibles o de lot amb processos de durada similar. Pot generar efecte convoy, on un proc√©s llarg bloqueja els curts, augmentant el temps d‚Äôespera.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="fcfs---caracter√≠stiques" class="slide level2">
<h2>FCFS - Caracter√≠stiques</h2>
<ul>
<li class="fragment"><strong>Simplicitat:</strong> Algorisme senzill d‚Äôimplementar i comprendre.</li>
<li class="fragment"><strong>No apropiatiu:</strong> Un proc√©s s‚Äôexecuta fins a la seva finalitzaci√≥ o bloqueig.</li>
<li class="fragment"><strong>Garantia de no inanici√≥:</strong> Tots els processos eventualment s‚Äôexecuten (sota la suposici√≥ que acaben).</li>
</ul>
</section>
<section id="fcfs---limitacions" class="slide level2">
<h2>FCFS - Limitacions</h2>
<ul>
<li class="fragment"><strong>Efecte Convoy:</strong> Processos curts poden quedar bloquejats per processos llargs, incrementant el temps d‚Äôespera mitj√†.</li>
<li class="fragment"><strong>Pot generar temps d‚Äôespera elevats:</strong> Especialment per a processos curts darrere de processos llargs.</li>
</ul>
<p>Adequat per a c√†rregues de treball <strong>homog√®nies</strong> on la durada dels processos √©s similar. Poc √≤ptim per a entorns amb variabilitat en la durada dels processos, ja que pot afectar la resposta i l‚Äôefici√®ncia del sistema.</p>
</section>
<section id="fcfs---exemple-illustratiu" class="slide level2">
<h2>FCFS - Exemple Il¬∑lustratiu</h2>
<div class="columns">
<div class="column" style="width:40%;">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;"><span class="math inline">\(p\)</span><sup>1</sup></th>
<th style="text-align: center;"><span class="math inline">\(t_a\)</span><sup>2</sup></th>
<th style="text-align: center;"><span class="math inline">\(t_{cpu}\)</span><sup>3</sup></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">üü¢ <strong>P1</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">20</td>
</tr>
<tr class="even">
<td style="text-align: center;">üîµ <strong>P2</strong></td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">5</td>
</tr>
<tr class="odd">
<td style="text-align: center;">üü£ <strong>P3</strong></td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">5</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:55%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display column-screen-inset">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">gantt 
    title Planificaci√≥
    dateFormat  X
    axisFormat %s
    
    section Execuci√≥
    üü¢ P1 : 0, 20
    üîµ P2 : 20, 25
    üü£ P3 : 25, 30
    
    section Preparats
    üîµ P2 a la cua : 5, 20
    üü£ P3 a la cua : 6, 25
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div></div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>Proc√©s</p></li><li id="fn2"><p>Temps d‚Äôarribada</p></li><li id="fn3"><p>Durada del burst</p></li></ol></aside></section>
<section id="fcfs---exemple-illustratiu-m√®triques" class="slide level2">
<h2>FCFS - Exemple Il¬∑lustratiu (M√®triques)</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment"><strong>Temps espera</strong>:<br>
<span class="math inline">\(T_{espera} = T_f + T_a - T_{cpu}\)</span></li>
<li class="fragment"><strong>Temps retorn</strong>:<br>
<span class="math inline">\(T_{retorn} = T_f - T_a\)</span></li>
<li class="fragment"><strong>Temps resposta</strong>:<br>
<span class="math inline">\(T_{resposta}= T_{inici} - T_a\)</span></li>
</ul>
</div><div class="column" style="width:50%;">
<table class="caption-top">
<thead>
<tr class="header">
<th>M√®trica</th>
<th>P1</th>
<th>P2</th>
<th>P3</th>
<th>Avg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(T_a\)</span><sup>1</sup></td>
<td>0</td>
<td>5</td>
<td>6</td>
<td>-</td>
</tr>
<tr class="even">
<td><span class="math inline">\(T_f\)</span><sup>2</sup></td>
<td>20</td>
<td>25</td>
<td>30</td>
<td>-</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(T_{inici}\)</span><sup>3</sup></td>
<td>0</td>
<td>20</td>
<td>25</td>
<td>-</td>
</tr>
<tr class="even">
<td><span class="math inline">\(T_{cpu}\)</span><sup>4</sup></td>
<td>20</td>
<td>5</td>
<td>5</td>
<td>-</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(T_{espera}\)</span></td>
<td>0</td>
<td>15</td>
<td>19</td>
<td>11.33</td>
</tr>
<tr class="even">
<td><span class="math inline">\(T_{retorn}\)</span></td>
<td>20</td>
<td>20</td>
<td>24</td>
<td>21.33</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(T_{resposta}\)</span></td>
<td>0</td>
<td>15</td>
<td>19</td>
<td>11.33</td>
</tr>
</tbody>
</table>
</div></div>
<aside><ol class="aside-footnotes"><li id="fn4"><p>Temps d‚Äôarribada</p></li><li id="fn5"><p>Temps de finalitzaci√≥</p></li><li id="fn6"><p>Temps del primer cicle d‚Äôexecuci√≥</p></li><li id="fn7"><p>Durada del burst</p></li></ol></aside></section>
<section id="exercici-01-fcfs---enunciat" class="slide level2 smaller">
<h2>Exercici 01: FCFS - Enunciat</h2>
<p>Considera els seg√ºents escenari i respon les preguntes:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Proc√©s</th>
<th>Temps arribada</th>
<th>R√†fegues</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>0</td>
<td><span class="math inline">\(7_{CPU}\)</span></td>
</tr>
<tr class="even">
<td>B</td>
<td>2</td>
<td><span class="math inline">\(4_{CPU}\)</span></td>
</tr>
<tr class="odd">
<td>C</td>
<td>3</td>
<td><span class="math inline">\(2_{CPU}\)</span></td>
</tr>
</tbody>
</table>
<ol type="1">
<li class="fragment">Dibuixa el diagrama de Gantt per a l‚Äôalgorisme FCFS.</li>
<li class="fragment">Calcula les seg√ºents m√®triques de rendiment: Percentatge d‚Äô√∫s de la CPU, Productivitat, Temps d‚Äôespera mitj√†, Temps de retorn mitj√† i Temps de retorn normalitzat mitj√†.</li>
<li class="fragment">Quin √©s l‚Äôefecte convoy en aquest exemple? Com afecta les m√®triques calculades?</li>
</ol>
</section>
<section id="exercici-01-fcfs---soluci√≥" class="slide level2 smaller">
<h2>Exercici 01: FCFS - Soluci√≥</h2>
<div class="columns">
<div class="column" style="width:40%;">
<table class="caption-top">
<thead>
<tr class="header">
<th>P</th>
<th>0</th>
<th>2</th>
<th>3</th>
<th>7</th>
<th>8</th>
<th>11</th>
<th>12</th>
<th>13</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>E</td>
<td>E</td>
<td>E</td>
<td>F</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>B</td>
<td></td>
<td>P</td>
<td>P</td>
<td>E</td>
<td>E</td>
<td>F</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>C</td>
<td></td>
<td></td>
<td>P</td>
<td>P</td>
<td>P</td>
<td>E</td>
<td>E</td>
<td>F</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:60%;">
<div class="fragment">
<p><span class="math display">\[ \%_{CPU} = \dfrac{Tcpu_{ocupada}}{Temps}=\dfrac{13}{13}=1=100\%\]</span></p>
</div>
<div class="fragment">
<p><span class="math display">\[ Productivitat = \dfrac{\#processos}{Temps}=\dfrac{3}{13}=0.23\]</span></p>
</div>
</div></div>
<div class="fragment">
<p><span class="math display">\[ \tilde{T}_{espera}= \dfrac{\tilde{T}_{espera}{A} + \tilde{T}_{espera}{B} + \tilde{T}_{espera}{C} }{\#processos}=\dfrac{0+5+8}{3}=4.3\]</span></p>
</div>
<div class="fragment">
<p><span class="math display">\[ \tilde{T}_{retorn} = \dfrac{\tilde{T}_{retorn}{A} + \tilde{T}_{retorn}{B} + \tilde{T}_{retorn}{C}}{\#processos}=\dfrac{7+9+10}{3}=8.6\]</span></p>
</div>
<div class="fragment">
<p><span class="math display">\[ \tilde{T}retorn_{N} = \dfrac{7/7 + 9/4 + 10/2}{3}=2.75\]</span></p>
</div>
</section>
<section id="exercici-01-fcfs---an√†lisi" class="slide level2 smaller">
<h2>Exercici 01: FCFS - An√†lisi</h2>
<ol type="1">
<li class="fragment"><strong>Efecte Convoy:</strong> El proc√©s P1 (llarg) bloqueja els processos P2 i P3 (curts), incrementant el temps d‚Äôespera.</li>
<li class="fragment"><strong>Sensible a l‚Äôordre arribada:</strong> Si P2 o P3 hagu√©s arribat abans que P1, el temps d‚Äôespera de P2 hauria estat menor.</li>
<li class="fragment"><strong>No apropiatiu:</strong> P1 ocupa la CPU fins a la seva finalitzaci√≥, sense donar oportunitat a P2 i P3.</li>
<li class="fragment"><strong>No √©s adequat per a sistemes interactius o en temps real:</strong> Els usuaris poden experimentar retards significatius en la resposta del sistema, ja que els processos curts poden quedar bloquejats darrere de processos llargs.</li>
</ol>
</section>
<section id="rr---diagrama-de-flux" class="slide level2">
<h2>RR - Diagrama de flux</h2>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    classDef iniciFi fill:#00A896,color:white,stroke:#007D6C,stroke-width:2px,font-size:22px;
    classDef decisio fill:#C46B9E,color:white,stroke:#963D6D,stroke-width:2px,font-size:22px;
    classDef proces fill:#fff,color:#333,stroke:#00A896,stroke-width:2px,font-size:22px;

    A([Inici]):::iniciFi --&gt; B{Hi ha&lt;br&gt;processos&lt;br&gt;pendents?}:::decisio
    B --&gt;|S√≠| C[[Agafar proc√©s&lt;br&gt;de la cua]]:::proces
    C --&gt; D{Temps del quantum&lt;br&gt;expirat?}:::decisio
    D --&gt;|No| E[[Executar proc√©s]]:::proces
    E --&gt; D
    D --&gt;|S√≠| F[[Col¬∑locar al final de la cua]]:::proces
    F --&gt; B
    B --&gt;|No| G([Fi]):::iniciFi
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="round-robin-rr" class="slide level2">
<h2>Round Robin (RR)</h2>
<p>Aquesta pol√≠tica √©s una variant de FCFS que introdueix l‚Äô<strong>apropiaci√≥</strong> mitjan√ßant l‚Äô√∫s de <strong>quantums de temps</strong>.</p>
<ul>
<li class="fragment">Cada proc√©s rep un <strong>quantum de temps</strong> per executar-se.</li>
<li class="fragment">Quan el <strong>quantum</strong> expira, el proc√©s √©s interromput i col¬∑locat al final de la cua de preparats.</li>
</ul>
<div class="fragment center-container">
<p>Quin √©s el temps d‚Äôespera en un sistema amb <span class="math inline">\(n\)</span> processos i un <strong>quantum</strong> de <span class="math inline">\(q\)</span> unitats de temps?<em>Amb arribades simult√†nies i sense variabilitat en bursts</em>.</p>
<ul>
<li class="fragment">El temps d‚Äôespera m√†xim per a qualsevol proc√©s √©s de <span class="math inline">\((n-1) \cdot q\)</span> unitats de temps.</li>
</ul>
</div>
</section>
<section id="rr---caracter√≠stiques" class="slide level2">
<h2>RR - Caracter√≠stiques</h2>
<ul>
<li class="fragment">Cap proc√©s pot monopolitzar la CPU durant un <strong>temps determinant (</strong><span class="math inline">\(q\)</span>).</li>
<li class="fragment">Utilitza una <strong>cua FIFO</strong> per gestionar els processos preparats.</li>
<li class="fragment">Utilitza una <strong>interrupci√≥ de rellotge</strong> per implementar el quantum de temps.</li>
<li class="fragment">√âs un algorisme <strong>apropiatiu</strong>.</li>
</ul>
</section>
<section id="rr---impacte-del-quantum-de-temps" class="slide level2">
<h2>RR - Impacte del quantum de temps</h2>
<p>Si analitzem l‚Äôelecci√≥ del quantum de temps (<span class="math inline">\(q\)</span>):</p>
<ul>
<li class="fragment">Si <span class="math inline">\(q\)</span> √©s molt petit:
<ul>
<li class="fragment">Augmenta el nombre de canvis de context.</li>
<li class="fragment">Incrementa la sobrec√†rrega del sistema.</li>
<li class="fragment">Pot reduir l‚Äôefici√®ncia i el throughput.</li>
</ul></li>
<li class="fragment">Si <span class="math inline">\(q\)</span> √©s molt gran:
<ul>
<li class="fragment">El comportament s‚Äôassembla a FCFS.</li>
<li class="fragment">Pot augmentar el temps de resposta per a processos curts.</li>
</ul></li>
</ul>
</section>
<section id="rr---exemple-en-sistemes-interactius" class="slide level2 smaller">
<h2>RR - Exemple en sistemes interactius</h2>
<p>RR √©s especialment adequat per a sistemes interactius on es requereix que els processos curts rebin resposta r√†pida.</p>
<ul>
<li class="fragment"><p>En sistemes interactius, els processos es poden classificar com a:</p>
<ul>
<li class="fragment"><strong>Processos d‚Äôusuari</strong>: Requereixen m√©s temps de CPU.</li>
<li class="fragment"><strong>Processos del sistema</strong>: Requereixen menys temps de CPU per√≤ respostes m√©s r√†pides.</li>
</ul></li>
<li class="fragment"><p>Es pot assignar diferents quantums de temps segons el tipus de proc√©s.</p></li>
<li class="fragment"><p>A UNIX, per exemple, s‚Äôutilitzen diferents quantums per a processos d‚Äôusuari i del sistema per equilibrar la resposta i l‚Äôefici√®ncia.</p>
<ul>
<li class="fragment"><span class="math inline">\(q = 100ms\)</span> per a processos d‚Äôusuari.</li>
<li class="fragment"><span class="math inline">\(q = 10ms\)</span> per a processos del sistema.</li>
<li class="fragment">El overhead del canvi de context √©s d‚Äôaproximadament <span class="math inline">\(0.1ms - 1ms\)</span>. Aquest valor √©s petit comparat amb la durada del quantum, per√≤ rellevant si els quantum s√≥n molt petits.</li>
</ul></li>
</ul>
</section>
<section id="rr-q20s---exemple-illustratiu" class="slide level2">
<h2>RR Q(20s) - Exemple Il¬∑lustratiu</h2>
<div class="columns">
<div class="column" style="width:40%;">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;"><span class="math inline">\(p\)</span></th>
<th style="text-align: center;"><span class="math inline">\(t_a\)</span></th>
<th style="text-align: center;"><span class="math inline">\(t_{cpu}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">üü¢ P1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">53</td>
</tr>
<tr class="even">
<td style="text-align: center;">üîµ P2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">8</td>
</tr>
<tr class="odd">
<td style="text-align: center;">üü£ P3</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">68</td>
</tr>
<tr class="even">
<td style="text-align: center;">üü† P4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">24</td>
</tr>
</tbody>
</table>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>P1</th>
<th>P2</th>
<th>P3</th>
<th>P4</th>
<th>Avg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(\tilde{T}_{espera}\)</span></td>
<td>72</td>
<td>20</td>
<td>85</td>
<td>88</td>
<td>66.25</td>
</tr>
<tr class="even">
<td><span class="math inline">\(\tilde{T}_{retorn}\)</span></td>
<td>125</td>
<td>28</td>
<td>153</td>
<td>112</td>
<td>104.5</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:55%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display column-screen-inset">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">gantt
title Planificaci√≥ Round Robin (Q=20)
dateFormat  X
axisFormat %s

section Execuci√≥
üü¢ P1 : 0, 20
üîµ P2 : 20, 28
üü£ P3 : 28, 48
üü† P4 : 48, 68
üü¢ P1 : 68, 88
üü£ P3 : 88, 108
üü† P4 : 108, 112
üü¢ P1 : 112, 125
üü£ P3 : 125, 145
üü£ P3 : 145, 153
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div></div>
</section>
<section id="rr-q20s---impacte-de-q-temps-despera" class="slide level2">
<h2>RR Q(20s) - Impacte de <span class="math inline">\(Q\)</span> (Temps d‚Äôespera)</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>Quantum / Estrat√®gia</th>
<th>P1</th>
<th>P2</th>
<th>P3</th>
<th>P4</th>
<th>Avg.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Millor FCFS</td>
<td>32</td>
<td>0</td>
<td>85</td>
<td>8</td>
<td>31.25</td>
</tr>
<tr class="even">
<td>Q=1</td>
<td>84</td>
<td>22</td>
<td>85</td>
<td>57</td>
<td>62</td>
</tr>
<tr class="odd">
<td>Q=5</td>
<td>82</td>
<td>20</td>
<td>85</td>
<td>58</td>
<td>61.25</td>
</tr>
<tr class="even">
<td>Q=20</td>
<td>72</td>
<td>20</td>
<td>85</td>
<td>88</td>
<td>66.25</td>
</tr>
<tr class="odd">
<td>Pitjor FCFS</td>
<td>68</td>
<td>145</td>
<td>0</td>
<td>121</td>
<td>83.5</td>
</tr>
</tbody>
</table>
</section>
<section id="rr-q20s---impacte-de-q-temps-de-finalitzaci√≥" class="slide level2">
<h2>RR Q(20s) - Impacte de <span class="math inline">\(Q\)</span> (Temps de finalitzaci√≥)</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>Quantum / Estrat√®gia</th>
<th>P1</th>
<th>P2</th>
<th>P3</th>
<th>P4</th>
<th>Avg.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Millor FCFS</td>
<td>85</td>
<td>8</td>
<td>153</td>
<td>32</td>
<td>69.5</td>
</tr>
<tr class="even">
<td>Q=1</td>
<td>137</td>
<td>30</td>
<td>153</td>
<td>81</td>
<td>100.25</td>
</tr>
<tr class="odd">
<td>Q=5</td>
<td>135</td>
<td>28</td>
<td>153</td>
<td>82</td>
<td>99.5</td>
</tr>
<tr class="even">
<td>Q=20</td>
<td>125</td>
<td>28</td>
<td>153</td>
<td>112</td>
<td>104.5</td>
</tr>
<tr class="odd">
<td>Pitjor FCFS</td>
<td>121</td>
<td>153</td>
<td>68</td>
<td>145</td>
<td>121.75</td>
</tr>
</tbody>
</table>
<aside class="notes">
<p>Quantum molt petit ‚Üí molts canvis de context ‚Üí sobrec√†rrega i baix throughput.</p>
<p>Quantum molt gran ‚Üí es comporta com FCFS ‚Üí mala resposta per a processos curts.</p>
<p>RR √©s ideal per a entorns interactius, per√≤ el quantum ha de ser triat amb cura per equilibrar lat√®ncia i efici√®ncia.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exercici-02-rr---enunciat" class="slide level2 smaller">
<h2>Exercici 02: RR - Enunciat</h2>
<p>Considera els seg√ºents processos i un planificador <strong>(RR(Q=1))</strong> <em>si dos processos arriben al mateix temps, s‚Äôexecutar√† el proc√©s amb prioritat m√©s elevada; en aquest cas concret (C,B,A)</em>:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Proc√©s</th>
<th>Temps arribada</th>
<th>R√†fegues</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>0</td>
<td><span class="math inline">\(7_{CPU}\)</span></td>
</tr>
<tr class="even">
<td>B</td>
<td>2</td>
<td><span class="math inline">\(4_{CPU}\)</span></td>
</tr>
<tr class="odd">
<td>C</td>
<td>3</td>
<td><span class="math inline">\(2_{CPU}\)</span></td>
</tr>
</tbody>
</table>
<ol type="1">
<li class="fragment">Dibuixa el diagrama de Gantt per a l‚Äôalgorisme Round-Robin amb un quantum de 1 unitat de temps.</li>
<li class="fragment">Calcula les seg√ºents m√®triques de rendiment: Temps d‚Äôespera mitj√†, Temps de retorn mitj√†, Temps de resposta mitj√† i Temps de retorn normalitzat mitj√†.</li>
</ol>
</section>
<section id="exercici-02-rr---soluci√≥" class="slide level2 smaller">
<h2>Exercici 02: RR - Soluci√≥</h2>
<table class="caption-top" style="width:100%;">
<colgroup>
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th>P</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
<th>12</th>
<th>13</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>E</td>
<td>E</td>
<td>P</td>
<td>E</td>
<td>P</td>
<td>P</td>
<td>E</td>
<td>P</td>
<td>P</td>
<td>E</td>
<td>P</td>
<td>E</td>
<td>E</td>
<td>F</td>
</tr>
<tr class="even">
<td>B</td>
<td></td>
<td></td>
<td>E</td>
<td>P</td>
<td>P</td>
<td>E</td>
<td>P</td>
<td>P</td>
<td>E</td>
<td>P</td>
<td>E</td>
<td>F</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>C</td>
<td></td>
<td></td>
<td></td>
<td>P</td>
<td>E</td>
<td>P</td>
<td>P</td>
<td>E</td>
<td>F</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><span class="math display">\[ \tilde{T}_{espera}= \dfrac{\tilde{T}_{espera}{A} + \tilde{T}_{espera}{B} + \tilde{T}_{espera}{C} }{\#processos}=\dfrac{6+5+3}{3}=4.66\]</span> <span class="math display">\[ \tilde{T}_{retorn} = \dfrac{\tilde{T}_{retorn}{A} + \tilde{T}_{retorn}{B} + \tilde{T}_{retorn}{C}}{\#processos}=\dfrac{13+9+5}{3}=9\]</span> <span class="math display">\[ \tilde{T}resposta =\dfrac{\tilde{T}_{resposta}{A} + \tilde{T}_{resposta}{B} + \tilde{T}_{resposta}{C}}{\#processos}=\dfrac{0+0+1}{3}=0.33\]</span> <span class="math display">\[ \tilde{T}retorn_{N} = \dfrac{7/7 + 9/4 + 5/2}{3}=2.2\]</span></p>
</section>
<section id="rr-vs-fcfs-i" class="slide level2">
<h2>RR vs FCFS (I)</h2>
<div class="{center-container}">
<p>Si assumim que el canvi de context triga <span class="math inline">\(0 ms\)</span>, <strong>podem afirmar que RR √©s sempre millor que FCFS?</strong></p>
</div>
<div class="fragment">
<ul>
<li class="fragment"><strong>RR no √©s sempre millor que FCFS</strong>.</li>
<li class="fragment">La decisi√≥ dep√®n de la c√†rrega de treball, la variabilitat dels bursts i els objectius del sistema (<em>throughput vs temps de resposta</em>).</li>
</ul>
</div>
<div class="fragment">
<p>Suposa que tenim 10 tasques, cada una amb 100s de burst de CPU i un quantum de 1s, i demostra que FCFS pot ser m√©s eficient que RR en aquest cas.</p>
</div>
</section>
<section id="rr-vs-fcfs-ii" class="slide level2 smaller">
<h2>RR vs FCFS (II)</h2>
<div class="columns">
<div class="column" style="width:40%;">
<table class="caption-top">
<thead>
<tr class="header">
<th>Tasca</th>
<th>Temps finalitzaci√≥ FCFS</th>
<th>Temps finalitzaci√≥ RR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>P1</td>
<td>100s</td>
<td>991s</td>
</tr>
<tr class="even">
<td>P2</td>
<td>200s</td>
<td>992s</td>
</tr>
<tr class="odd">
<td>‚Ä¶</td>
<td>‚Ä¶</td>
<td>‚Ä¶</td>
</tr>
<tr class="even">
<td>P10</td>
<td>1000s</td>
<td>1000s</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment">Els processos s‚Äôacaben pr√†cticament en el mateix moment amb ambd√≥s algorismes.</li>
<li class="fragment">El <strong>throughput</strong> √©s molt millor amb FCFS en aquest cas, ja que RR introdueix m√©s alternan√ßa entre processos.</li>
<li class="fragment">Els estats de cache poden ser compartits amb RR, per√≤ amb FCFS cada proc√©s pot utilitzar la cache de manera m√©s eficient.</li>
<li class="fragment">RR √©s avantatj√≥s nom√©s quan els processos tenen durades variables o quan es busca responsivitat interactiva. En casos de processos molt llargs i uniformes, FCFS pot ser m√©s eficient.</li>
</ul>
</div></div>
</section>
<section id="prioritats" class="slide level2">
<h2>Prioritats</h2>
<ul>
<li class="fragment">L‚Äôalgorisme assigna un valor de prioritat a cada proc√©s, (a linux pots utilitzar <code>nice</code> per ajustar la prioritat).</li>
<li class="fragment">En cas d‚Äôempat, es pot aplicar un altre algorisme (habitualment FIFO).</li>
<li class="fragment">Les prioritats poden ser est√†tiques o din√†miques.</li>
</ul>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    classDef iniciFi fill:#00A896,color:white,stroke:#007D6C,stroke-width:2px,font-size:22px;
    classDef decisio fill:#C46B9E,color:white,stroke:#963D6D,stroke-width:2px,font-size:22px;
    classDef proces fill:#fff,color:#333,stroke:#00A896,stroke-width:2px,font-size:22px;    

    A([Inici]):::iniciFi --&gt; B{Hi ha&lt;br&gt;processos&lt;br&gt;pendents?}:::decisio
    B --&gt;|S√≠| C[[Ordenar per&lt;br&gt;prioritat]]:::proces
    C --&gt; D[[Executar proc√©s&lt;br&gt;m√©s prioritari]]:::proces
    D --&gt; E{Tots&lt;br&gt;executats?}:::decisio
    E --&gt;|No| C
    E --&gt;|S√≠| F([Fi]):::iniciFi
    B --&gt;|No| F
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="exercici-03-prioritats---enunciat" class="slide level2 smaller">
<h2>Exercici 03: Prioritats - Enunciat</h2>
<p>Considera els seg√ºents processos amb les seves respectives prioritats i respon les preguntes:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Proc√©s</th>
<th>Temps arribada</th>
<th>R√†fegues</th>
<th>Prioritat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>0</td>
<td><span class="math inline">\(7_{CPU}\)</span></td>
<td>5</td>
</tr>
<tr class="even">
<td>B</td>
<td>2</td>
<td><span class="math inline">\(4_{CPU}\)</span></td>
<td>1</td>
</tr>
<tr class="odd">
<td>C</td>
<td>3</td>
<td><span class="math inline">\(2_{CPU}\)</span></td>
<td>6</td>
</tr>
</tbody>
</table>
<ol type="1">
<li class="fragment">Dibuixa el diagrama de Gantt per a l‚Äôalgorisme de planificaci√≥ per prioritats (suposant prioritat ascendent -&gt; B,A,C).</li>
<li class="fragment">Calcula les seg√ºents m√®triques de rendiment: Percentatge d‚Äô√∫s de la CPU, Productivitat, Temps d‚Äôespera mitj√†, Temps de retorn mitj√† i Temps de resposta mitj√†.</li>
</ol>
</section>
<section id="exercici-03-prioritats---soluci√≥" class="slide level2 smaller">
<h2>Exercici 03: Prioritats - Soluci√≥</h2>
<div class="columns">
<div class="column" style="width:60%;">
<table class="caption-top">
<thead>
<tr class="header">
<th>P</th>
<th>0</th>
<th>2</th>
<th>3</th>
<th>6</th>
<th>11</th>
<th>12</th>
<th>13</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>E</td>
<td>P</td>
<td>P</td>
<td>E</td>
<td>F</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>B</td>
<td></td>
<td>E</td>
<td>E</td>
<td>F</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>C</td>
<td></td>
<td></td>
<td>P</td>
<td>P</td>
<td>E</td>
<td>E</td>
<td>F</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:40%;">
<p><span class="math display">\[ \%_{CPU} = \dfrac{Tcpu_{ocupada}}{Temps}=\dfrac{13}{13}=1=100\%\]</span> <span class="math display">\[ Productivitat = \dfrac{\#processos}{Temps}=\dfrac{3}{13}\]</span></p>
</div></div>
<p><span class="math display">\[ \tilde{T}_{espera} = \dfrac{\tilde{T}_{espera}(A) + \tilde{T}_{espera}(B) + \tilde{T}_{espera}(C)}{\#processos}=\dfrac{4+0+8}{3}=4\]</span> <span class="math display">\[ \tilde{T}_{retorn} = \dfrac{\tilde{T}_{retorn}(A) + \tilde{T}_{retorn}(B) + \tilde{T}_{retorn}(C)}{\#processos}=\dfrac{11+4+10}{3}=8.33\]</span> <span class="math display">\[ \tilde{T}_{resposta} = \dfrac{\tilde{T}_{resposta}(A) + \tilde{T}_{resposta}(B) + \tilde{T}_{resposta}(C)}{\#processos}=\dfrac{0+0+8}{3}=2.66\]</span></p>
</section>
<section id="envelliment" class="slide level2 smaller">
<h2>Envelliment</h2>
<p>Amb els <strong>algorismes de prioritat</strong>, els processos amb prioritat baixa poden quedar inactius indefinidament (<strong>inanici√≥</strong>) si sempre hi ha processos amb prioritat m√©s alta a la cua de preparats.</p>
<p><strong>L‚Äôenvelliment</strong> √©s una estrat√®gia utilitzada per abordar el problema d‚Äôinanici√≥ que pot sorgir en els algorismes de planificaci√≥ basats en prioritats. Augmenta peri√≤dicament la prioritat dels processos preparats que no aconsegueixen executar-se.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource pseudocode number-lines code-with-copy"><code class="sourceCode"><span id="cb1-1"><a></a>function Aging(processes):</span>
<span id="cb1-2"><a></a>    for each process in processes:</span>
<span id="cb1-3"><a></a>        if process.waitingTime &gt;= agingThreshold:</span>
<span id="cb1-4"><a></a>            process.increasePriority() // Augmenta la prioritat del proc√©s</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="i-si-coneixem-el-futur-sjf-i-srtf" class="slide level2 smaller">
<h2>I si coneixem el futur? ‚Äì SJF i SRTF</h2>
<ol type="1">
<li class="fragment">Shortest Job First (SJF)
<ul>
<li class="fragment">Executa el proc√©s amb menor temps de CPU total.</li>
<li class="fragment">Tamb√© conegut com Shortest Time to Completion First (STCF).</li>
<li class="fragment">Politica no apropiativa: un cop un proc√©s comen√ßa, s‚Äôexecuta fins al final del burst o fi del proc√©s.</li>
</ul></li>
<li class="fragment">Shortest Remaining Time First (SRTF)
<ul>
<li class="fragment">Versi√≥ apropiativa de SJF.</li>
<li class="fragment">Si arriba un proc√©s amb un temps restant menor que el del proc√©s actual, aquest √©s interromput immediatament.</li>
<li class="fragment">Tamb√© conegut com Shortest Remaining Time to Completion First (SRTCF).</li>
</ul></li>
</ol>
</section>
<section id="sjf---exemple-illustratiu" class="slide level2">
<h2>SJF - Exemple Il¬∑lustratiu</h2>
<div class="columns">
<div class="column" style="width:40%;">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;"><span class="math inline">\(p\)</span><sup>1</sup></th>
<th style="text-align: center;"><span class="math inline">\(t_a\)</span><sup>2</sup></th>
<th style="text-align: center;"><span class="math inline">\(t_{cpu}\)</span><sup>3</sup></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">üü¢ <strong>P1</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">10</td>
</tr>
<tr class="even">
<td style="text-align: center;">üîµ <strong>P2</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">5</td>
</tr>
<tr class="odd">
<td style="text-align: center;">üü£ <strong>P3</strong></td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:55%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">gantt
title Planificaci√≥ SJF
dateFormat  X
axisFormat %s

section Execuci√≥
üîµ P2 : 0, 5
üü£ P3 : 5, 9
üü¢ P1 : 9, 19

section Preparats
üü¢ P1 a la cua : 0, 9
üü£ P3 a la cua : 1, 5
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<table class="caption-top">
<thead>
<tr class="header">
<th>M√®trica</th>
<th>P1</th>
<th>P2</th>
<th>P3</th>
<th>Mitjana</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(T_{espera}\)</span></td>
<td>9</td>
<td>0</td>
<td>4</td>
<td>4.33</td>
</tr>
<tr class="even">
<td><span class="math inline">\(T_{retorn}\)</span></td>
<td>19</td>
<td>5</td>
<td>8</td>
<td>10.67</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(T_{resposta}\)</span></td>
<td>9</td>
<td>0</td>
<td>4</td>
<td>4.33</td>
</tr>
</tbody>
</table>
</div></div>
<aside><ol class="aside-footnotes"><li id="fn8"><p>Proc√©s</p></li><li id="fn9"><p>Temps d‚Äôarribada</p></li><li id="fn10"><p>Durada del burst</p></li></ol></aside></section>
<section id="sjf---caracter√≠stiques" class="slide level2">
<h2>SJF - Caracter√≠stiques</h2>
<ol type="1">
<li class="fragment">Pot provocar <strong>inanici√≥</strong>? S√≠, qualsevol pol√≠tica que prioritzi una propietat pot provocar inanici√≥.</li>
<li class="fragment">Pot provocar <strong>convoy</strong>? S√≠, qualsevol pol√≠tica no apropiativa pot provocar convoy.</li>
<li class="fragment">Redueix el temps de retorn? S√≠, redueix el temps mitj√† de finalitzaci√≥ si i nom√©s si tots els processos arriben alhora.</li>
<li class="fragment">Requereix coneixement previ del temps de burst? S√≠, √©s un dels seus inconvenients principals.</li>
</ol>
</section>
<section id="srtf---exemple-illustratiu" class="slide level2">
<h2>SRTF - Exemple Il¬∑lustratiu</h2>
<div class="columns">
<div class="column" style="width:40%;">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;"><span class="math inline">\(p\)</span></th>
<th style="text-align: center;"><span class="math inline">\(t_a\)</span></th>
<th style="text-align: center;"><span class="math inline">\(t_{cpu}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">üü¢ P1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">20</td>
</tr>
<tr class="even">
<td style="text-align: center;">üîµ P2</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">5</td>
</tr>
<tr class="odd">
<td style="text-align: center;">üü£ P3</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:55%;">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">gantt
title Planificaci√≥ SRTF
dateFormat  X
axisFormat %s

section Execuci√≥
üü¢ P1 : 0, 5
üîµ P2 : 5, 8
üü£ P3 : 8, 9
üîµ P2 : 9, 11
üü¢ P1 : 11, 22

section Preparats
üü¢ P1 a la cua : 5, 11
üîµ P2 a la cua : 8, 9
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<table class="caption-top">
<thead>
<tr class="header">
<th>M√®trica</th>
<th>P1</th>
<th>P2</th>
<th>P3</th>
<th>Mitjana</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(T_{espera}\)</span></td>
<td>6</td>
<td>1</td>
<td>0</td>
<td>2.33</td>
</tr>
<tr class="even">
<td><span class="math inline">\(T_{retorn}\)</span></td>
<td>22</td>
<td>6</td>
<td>1</td>
<td>9.67</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(T_{resposta}\)</span></td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="srtf---caracter√≠stiques" class="slide level2">
<h2>SRTF - Caracter√≠stiques</h2>
<ul>
<li class="fragment"><strong>Apropiatiu</strong>: un proc√©s curt pot interrompre un proc√©s m√©s llarg.</li>
<li class="fragment">Redueix significativament el temps mitj√† de resposta per a processos curts.</li>
<li class="fragment">Pot provocar inanici√≥ en processos llargs si arriben processos curts constantment.</li>
<li class="fragment">Cal considerar canvis de context i el seu cost associat.</li>
</ul>
</section>
<section id="preveient-el-futur-srtf-com-a-refer√®ncia" class="slide level2">
<h2>Preveient el futur: SRTF com a refer√®ncia</h2>
<ul>
<li class="fragment">Si pogu√©ssim con√®ixer el temps restant de cada proc√©s, sempre podr√≠em executar el proc√©s que acabaria abans.</li>
</ul>
<div class="center-container fragment">
<p>Com fer-ho en la pr√†ctica?</p>
</div>
<ul>
<li class="fragment">Alguns sistemes demanen a l‚Äôusuari indicar la durada estimada del job. Per evitar abusos, el sistema pot interrompre jobs que superin aquesta durada.</li>
<li class="fragment">√âs molt dif√≠cil predir amb precisi√≥ el temps de burst, fins i tot per usuaris honestos.</li>
</ul>
</section>
<section id="srtf-el-l√≠mit-te√≤ric" class="slide level2">
<h2>SRTF: el l√≠mit te√≤ric</h2>
<ul>
<li class="fragment">SRTF (Shortest Remaining Time First) √©s una pol√≠tica √≤ptima pel temps de resposta mitj√†.</li>
<li class="fragment">Cap altra pol√≠tica pot superar SRTF en aquest criteri.</li>
<li class="fragment">Es fa servir sovint com a refer√®ncia de comparaci√≥ amb altres algorismes.</li>
</ul>
</section>
<section id="com-es-pot-predir-el-futur" class="slide level2">
<h2>Com es pot predir el futur?</h2>
<p>Una estrat√®gia comuna √©s utilitzar estimacions basades en l‚Äôhistorial de comportament dels processos. Molts programes mostren patrons repetitius en la seva utilitzaci√≥ de la CPU i I/O. Si els processos tenen un comportament aleatori, aquesta estrat√®gia no seria √∫til.</p>
<p><span class="math display">\[t_n = f(t_{n-1}, t_{n-2}, t_{n-3}, \ldots)\]</span> On: <span class="math inline">\(t_n\)</span> √©s la durada estimada del seg√ºent burst de CPU. <span class="math inline">\(f\)</span> √©s una funci√≥ que utilitza els bursts anteriors per fer la predicci√≥.</p>
<div class="center-container">
<p>Si un proc√©s ha estat E/S o CPU en el passat, probablement continuar√† sent-ho en el futur.</p>
</div>
</section>
<section id="exercici-04-sjf-vs-rr" class="slide level2 smaller">
<h2>Exercici 04: SJF vs RR</h2>
<p>Realitza la planificaci√≥ dels seg√ºents processos utilitzant els algorismes de planificaci√≥ <strong>Round Robin amb un quantum de 3 unitats de temps</strong> i <strong>SJF (Shortest Job First) no apropiatiu</strong>. En cas d‚Äôempat on 2 processos arribin a la cua de preparats al mateix temps, s‚Äôexecutar√† el proc√©s amb prioritat m√©s elevada en aquest cas (<em>B,A,C</em>).</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Proc√©s</th>
<th>Temps arribada</th>
<th>R√†fegues</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>7</td>
<td><span class="math inline">\(5_{CPU},2_{E/S},4_{CPU}\)</span></td>
</tr>
<tr class="even">
<td>B</td>
<td>3</td>
<td><span class="math inline">\(4_{CPU},1_{E/S},1_{CPU},1_{E/S},1_{CPU}\)</span></td>
</tr>
<tr class="odd">
<td>C</td>
<td>1</td>
<td><span class="math inline">\(2_{CPU},1_{E/S},3_{CPU},2_{E/S},1_{CPU}\)</span></td>
</tr>
</tbody>
</table>
<p>Es demana:</p>
<ul>
<li class="fragment">Mostrar la planificaci√≥ dels processos en un diagrama de Gantt.</li>
<li class="fragment">Calcular el temps d‚Äôespera, resposta i retorn mitj√† de cada proc√©s.</li>
<li class="fragment">Comparar els resultats obtinguts amb els algorismes de planificaci√≥.</li>
</ul>
<p>Les solucions es troben a: <a href="../activities/unit03/solutions/Diapositives_RRQ3.pdf">Round Robin Q=3</a> i <a href="../activities/unit03/solutions/Diapositives_SJF_Noapropiatiu.pdf">SJF</a>.</p>
</section>
<section id="qu√®-s√≥n-les-cues-multinivell" class="slide level2 smaller">
<h2>Qu√® s√≥n les cues multinivell?</h2>
<p><strong>Objectiu</strong>: Optimitzar l‚Äô√∫s de la CPU separant processos segons les seves necessitats de recursos (com ara intensitat d‚ÄôE/S o de CPU) i assignant-los a diferents cues, cadascuna amb pol√≠tiques de planificaci√≥ personalitzades.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="../figures/slides/04-sched/cua-sense-retroalimentacio.png" data-scale="80%"></p>
<p><strong>Cues Multinivell sense Retroalimentaci√≥</strong>:</p>
<ul>
<li class="fragment">Assignaci√≥ fixa de processos a una cua segons les seves caracter√≠stiques inicials.</li>
<li class="fragment">No es permet el moviment entre cues; cada proc√©s roman a la seva cua original.</li>
</ul>
</div><div class="column" style="width:50%;">
<p><img data-src="../figures/slides/04-sched/cua-retroalimentacio.png"></p>
<p><strong>Cues Multinivell amb Retroalimentaci√≥</strong>:</p>
<ul>
<li class="fragment">Els processos poden canviar de cua en funci√≥ del seu comportament din√†mic.</li>
<li class="fragment">Inclou promoci√≥ o degradaci√≥ de prioritats segons el rendiment o el consum de recursos.</li>
</ul>
</div></div>
</section>
<section id="cues-sense-retroalimentaci√≥" class="slide level2 smaller">
<h2>Cues sense Retroalimentaci√≥</h2>
<ul>
<li class="fragment"><strong>Assignaci√≥ Est√†tica de Processos a Cues:</strong>
<ul>
<li class="fragment">Els processos es col¬∑loquen en una cua en funci√≥ de caracter√≠stiques fixes (p.&nbsp;ex., tipus d‚Äôoperacions).</li>
<li class="fragment">Exemples: processos intensius en E/S en cues de primer pla i processos intensius en CPU en cues de segon pla.</li>
</ul></li>
<li class="fragment"><strong>Pol√≠tiques de Planificaci√≥ Espec√≠fiques per a Cada Cua</strong>:
<ul>
<li class="fragment">Round Robin (RR) per a cues de primer pla.</li>
<li class="fragment">First-Come-First-Served (FCFS) per a cues de segon pla.</li>
</ul></li>
<li class="fragment"><strong>Assignaci√≥ de la CPU entre les Cues</strong>:
<ul>
<li class="fragment"><strong>Prioritat Absoluta</strong>: S‚Äôassigna la CPU primer a la cua amb prioritat m√©s alta i nom√©s quan est√† buida es passa a la seg√ºent.</li>
<li class="fragment"><strong>Assignaci√≥ Temporal (Time Slicing)</strong>: Cada cua t√© un percentatge fix de temps de CPU, segons la seva prioritat (p.&nbsp;ex., 70% per la prioritat m√©s alta, 20% per la segona, 10% per la m√©s baixa).</li>
</ul></li>
</ul>
</section>
<section id="cues-amb-retroalimentaci√≥" class="slide level2 smaller">
<h2>Cues amb Retroalimentaci√≥</h2>
<ol type="1">
<li class="fragment">Els processos s‚Äôassignen inicialment a la cua de major prioritat.</li>
<li class="fragment">El moviment entre cues es basa en el comportament durant l‚Äôexecuci√≥, permetent que processos intensius en E/S, de curta durada, es mantinguin a prop de la CPU, mentre que els processos CPU-intensius descendeixin per no monopolitzar els recursos.</li>
</ol>
<div class="fragment">
<p><strong>Exemple</strong>: Els processos curts o amb alta demanda d‚ÄôE/S es mantenen en la part superior, reduint la lat√®ncia de resposta, mentre que processos amb alta demanda de CPU es desplacen r√†pidament cap a cues de menor prioritat, aconseguint una efici√®ncia semblant a SRT (Shortest Remaining Time).</p>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="promoci√≥">Promoci√≥</h3>
<p>Els processos que completen la seva execuci√≥ dins del seu <strong>quantum</strong> de temps poden ascendir a una cua de prioritat superior.</p>
</div><div class="column" style="width:50%;">
<h3 id="degradaci√≥">Degradaci√≥</h3>
<p>Els processos que no completen la seva execuci√≥ dins del <strong>quantum</strong> descendeixen a una cua de prioritat inferior.</p>
</div></div>
</div>
</section>
<section id="assignaci√≥-temporal-de-la-cpu-en-cues-amb-retroalimentaci√≥" class="slide level2 smaller">
<h2>Assignaci√≥ Temporal de la CPU en Cues amb Retroalimentaci√≥</h2>
<p><strong>Quantum de Temps Variable</strong>: Cada cua de prioritat t√© un quantum de temps espec√≠fic i progressivament m√©s llarg en cues de menor prioritat, optimitzant aix√≠ la gesti√≥ de processos de llarga durada.</p>
<p><strong>Exemple</strong>: Cues Round Robin amb quantums exponencials (1ms, 2ms, 4ms, etc.) per a processos de llarga durada.</p>
<p><strong>Moviment Din√†mic entre Cues</strong>: Si un proc√©s no finalitza dins del seu quantum assignat, es mou a una cua amb menor prioritat, on rebr√† un quantum m√©s llarg per√≤ menor prioritat d‚Äôexecuci√≥.</p>
<p><strong>Exemple</strong>: Els processos amb alta demanda de CPU descendeixen r√†pidament de prioritat, evitant que monopolitzin la CPU. Els processos de curta durada i/o intensius en E/S mantenen la prioritat alta, maximitzant el seu acc√©s a la CPU i reduint la lat√®ncia.</p>
</section>
<section id="estrat√®gies-de-planificaci√≥-i-contramesures" class="slide level2 smaller">
<h2>Estrat√®gies de Planificaci√≥ i Contramesures</h2>
<ul>
<li class="fragment"><strong>Estructura Flexible de Cues</strong>: Les cues amb retroalimentaci√≥ permeten que els processos amb canvis de comportament puguin ajustar la seva posici√≥.</li>
<li class="fragment"><strong>Temps de CPU per Cua</strong>: Cada cua rep un percentatge del temps de CPU: P. ex., cues interactives reben un percentatge m√©s alt per a reduir el temps de resposta.</li>
</ul>
<div class="center-container fragment">
<p>Feta la llei, feta la trampa: els usuaris poden manipular les prioritats dels processos per obtenir un millor rendiment, tot i que aix√≤ pot afectar negativament la resta de processos <strong>inversi√≥ de prioritats</strong>.</p>
</div>
</section>
<section id="exemple-othello" class="slide level2 smaller">
<h2>Exemple: Othello</h2>
<ul>
<li class="fragment"><strong>Objectiu</strong>: Mantenir el programa en una cua de major prioritat per garantir temps de CPU preferent i una resposta r√†pida en les decisions del joc.</li>
<li class="fragment">El programa executava una s√®rie d‚Äôoperacions de sortida (<code>printf()</code>), aparentment innecess√†ries des d‚Äôun punt de vista funcional. Aquesta activitat d‚Äôentrada/sortida feia que el sistema consider√©s el proc√©s com a input/output-bound (intensiu en E/S) en lloc de CPU-bound (intensiu en CPU).</li>
<li class="fragment"><strong>Resultat</strong>: Mantenir-se en una cua de major prioritat gr√†cies a la detecci√≥ del seu comportament d‚ÄôE/S. Evitar el descens de prioritat que es produeix en els processos intensius en CPU que consumeixen els seus quantums sense fer operacions d‚ÄôE/S.</li>
</ul>
<div class="fragment">
<p><strong>Nota</strong>: En sistemes de producci√≥, es poden aplicar pol√≠tiques restrictives o t√®cniques d‚Äôan√†lisi per detectar i limitar aquest tipus de manipulacions de prioritat per mantenir l‚Äôequilibri i l‚Äôefici√®ncia del sistema.</p>
</div>
</section>
<section id="aix√≤-√©s-tot-per-avui" class="slide level2 smaller">
<h2>Aix√≤ √©s tot per avui</h2>
<div class="columns">
<div class="column" style="width:60%;">
<h4 id="take-home-message">TAKE HOME MESSAGE</h4>
<p>La planificaci√≥ de processos √©s un dels aspectes m√©s importants dels sistemes operatius. Els algorismes de planificaci√≥ s√≥n fonamentals per garantir l‚Äôefici√®ncia i el rendiment del sistema.</p>
</div><div class="column" style="width:40%;">
<p><img data-src="https://static.posters.cz/image/750/posters/looney-tunes-thats-all-folks-i295.jpg"></p>
</div></div>


</section></section>

    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../figures/corporative/institute.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Unitat 4 ¬∑ Sistemes Operatius (SO) <a href="../index.html">üè†</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/os-gei-udl-2526-105012\.github\.io\/course\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>