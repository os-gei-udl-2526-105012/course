<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.25">

  <meta name="author" content="Jordi Mateo Fornés">
  <title>SO - Fall 2025 – Introducció a la programació de Sistema (I) (C)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-534cd8e3a96973385dffff3f4709048d.css">
  <link rel="stylesheet" href="styles.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Introducció a la programació de Sistema (I) (C)</h1>
  <p class="subtitle">Unitat 1 · Sistemes Operatius (SO)</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jordi Mateo Fornés 
</div>
</div>
</div>

</section>
<section>
<section id="introducció" class="title-slide slide level1 center">
<h1>Introducció</h1>

</section>
<section id="desenvolupament-en-sistemes-linuxunix" class="slide level2">
<h2>Desenvolupament en sistemes Linux/UNIX</h2>
<p>El desenvolupament de programari de sistema el realitzarem amb els llenguatge <strong>C</strong> i basa en els compiladors <strong>GNU gcc</strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a></a><span class="co">#!/bin/sh</span></span>
<span id="cb1-2"><a></a><span class="co"># ./check.sh</span></span>
<span id="cb1-3"><a></a><span class="fu">gcc</span> <span class="at">-v</span></span>
<span id="cb1-4"><a></a><span class="cf">if</span> <span class="bu">[</span> <span class="va">$?</span> <span class="ot">!=</span> 0 <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb1-5"><a></a>       <span class="bu">echo</span> <span class="st">"GCC is not installed!"</span></span>
<span id="cb1-6"><a></a><span class="cf">fi</span></span>
<span id="cb1-7"><a></a><span class="fu">ld</span> <span class="at">-v</span></span>
<span id="cb1-8"><a></a><span class="cf">if</span> <span class="bu">[</span> <span class="va">$?</span> <span class="ot">!=</span> 0 <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb1-9"><a></a>        <span class="bu">echo</span> <span class="st">"Please install binutils!"</span></span>
<span id="cb1-10"><a></a><span class="cf">fi</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/scripts/check.sh">scripts/check.sh</a></p>
</div>
<aside class="notes">
<p>Per poder desenvolupar en C en un sistema Linux/UNIX necessitem tenir instal·lat el compilador <strong>GCC</strong> i les eines de <strong>binutils</strong>. Aquestes eines són necessàries per a la compilació i enllaçat dels programes. Per comprovar si tenim instal·lat aquestes eines podem executar el script anterior. Si no tenim instal·lat aquestes eines, podem instal·lar-les amb la comanda <code>sudo apt-get install build-essential</code> en sistemes basats en Debian o <code>sudo dnf groupinstall "Development Tools"</code> en sistemes basats en RedHat.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="navegant-a-les-entranyes-del-compilador-gcc" class="slide level2">
<h2>Navegant a les entranyes del compilador GCC</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="../figures/slides/01-c/compiler.png" style="width:80.0%"></p>
</div><div class="column" style="width:30%;">
<p><img data-src="../figures/slides/01-c/c-sample.png" style="width:90.0%"></p>
</div></div>
<aside class="notes">
<p>Els llenguatges de programació compilats són aquells que es tradueixen a codi màquina abans de l’execució. Aquest procés de traducció es realitza per un programa anomenat compilador. El compilador és un programa que tradueix el codi font d’un programa escrit en un llenguatge de programació de nivell alt a codi màquina. En el cas de C, hi ha diferents etapes codi, ensamblador i enllaçador. El compilador GCC és un compilador de codi obert que es pot utilitzar per a la compilació de programes en C, C++, Fortran, Ada, etc. Aquest compilador és molt potent i permet la compilació de programes en diferents plataformes. A més, el compilador GCC és molt flexible i permet la configuració de diferents opcions de compilació.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="etapes-de-la-compilació-i-lenllaç-i" class="slide level2">
<h2>Etapes de la compilació i l’enllaç (I)</h2>
<h3 id="preprocessador">Preprocessador</h3>
<ul>
<li class="fragment">El preprocessador processa el codi font, buscant instruccions que comencen amb un hash (#), com <strong>#include, #define, i #ifdef</strong>.</li>
<li class="fragment">Inclou fitxers d’encapçalament (<strong>headers</strong>) i substitueix <em>macros i definicions</em>. <span class="alert">També elimina els comentaris</span>.</li>
<li class="fragment">Genera un fitxer de codi font amb les instruccions del preprocessador processades, preparat per a la compilació.</li>
</ul>
</section>
<section id="etapes-de-la-compilació-i-lenllaç-ii" class="slide level2">
<h2>Etapes de la compilació i l’enllaç (II)</h2>
<h3 id="compilador">Compilador</h3>
<ul>
<li class="fragment">Traduïx el codi font al assemblador equivalent. En alguns compiladors, el codi es pot convertir directament en codi màquina en aquesta etapa.</li>
<li class="fragment">Traduir el codi de nivell alt a codi de nivell baix i optimitzar-lo per al maquinari subjacent.</li>
<li class="fragment">Genera un fitxer de codi assemblador amb l’extensió <strong>.s</strong>. Per exemple, si el fitxer de codi font és <em>hola.c</em>, el fitxer generat seria <em>hola.s</em>.</li>
</ul>
</section>
<section id="etapes-de-la-compilació-i-lenllaç-iii" class="slide level2">
<h2>Etapes de la compilació i l’enllaç (III)</h2>
<h3 id="assemblador">Assemblador</h3>
<ul>
<li class="fragment">Converteix el codi assemblador en <strong>codi objecte</strong> o codi de màquina.</li>
<li class="fragment">Produir codi binari que pugui ser entès per la CPU.</li>
<li class="fragment">Genera un fitxer de codi objecte amb l’extensió <strong>.o</strong>. Per exemple, el fitxer resultant seria <code>hola.o</code>.</li>
</ul>
</section>
<section id="etapes-de-la-compilació-i-lenllaç-iv" class="slide level2">
<h2>Etapes de la compilació i l’enllaç (IV)</h2>
<h3 id="enllaçador-linker">Enllaçador (Linker)</h3>
<ul>
<li class="fragment">Enllaça el codi <strong>objecte</strong> amb les <strong>biblioteques</strong> necessàries per crear l’executable final.</li>
<li class="fragment">Organitzar i combinar el codi objecte i les biblioteques, <em>resolent les referències externes</em>.</li>
<li class="fragment">Genera l’executable final, que és el fitxer que podeu executar. Per exemple, <strong>hola</strong>.</li>
</ul>
</section>
<section id="exemple-etapes" class="slide level2 smaller">
<h2>Exemple: Etapes</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb2-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb2-2"><a></a></span>
<span id="cb2-3"><a></a><span class="pp">#define x </span><span class="dv">10</span></span>
<span id="cb2-4"><a></a><span class="pp">#define y </span><span class="dv">5</span></span>
<span id="cb2-5"><a></a></span>
<span id="cb2-6"><a></a><span class="dt">int</span> </span>
<span id="cb2-7"><a></a>main<span class="op">(){</span></span>
<span id="cb2-8"><a></a>  printf<span class="op">(</span><span class="st">"El resultat de l'opearció: </span></span>
<span id="cb2-9"><a></a>      <span class="op">%</span>d <span class="op">+</span> <span class="op">%</span>d <span class="op">=</span> <span class="op">%</span>d\n<span class="st">", x,y,x+y);</span></span>
<span id="cb2-10"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-11"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/ex1.c">sources/ex1.c</a></p>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li class="fragment"><strong>Executable</strong>: <code>gcc -o ex1 ex1.c</code></li>
<li class="fragment"><strong>Assemblador</strong>: <code>gcc -S -o ex1.s ex1.c</code></li>
<li class="fragment"><strong>Codi objecte</strong>: <code>gcc -c -o ex1.o ex1.c</code></li>
<li class="fragment"><strong>Preprocessador</strong>: <code>gcc -E -o ex1.i ex1.c</code></li>
<li class="fragment"><strong>Desensamblador</strong>: <code>objdump -d ex1.o</code> o <code>objdump -d -M intel ex1</code></li>
</ul>
</div></div>
<div title="Notes">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Notes</strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment"><code>-M intel</code> indica l’ús de la sintaxi Intel per a una millor llegibilitat.</li>
<li class="fragment">Tots aquests fitxers generats els posarem al .gitignore.</li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="com-funciona-el-compilador-gcc" class="slide level2 smaller">
<h2>Com funciona el compilador GCC?</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a></a><span class="fu">gcc</span> <span class="op">&lt;</span>codi<span class="op">&gt;</span> -g <span class="at">-c</span> <span class="op">&lt;</span>codi<span class="op">&gt;</span> -o <span class="op">&lt;</span>executable<span class="op">&gt;</span> -I <span class="op">&lt;</span>dirIncludes<span class="op">&gt;</span> -L <span class="op">&lt;</span>dirLibs<span class="op">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li class="fragment"><strong>-g</strong>: Genera informació de depuració.</li>
<li class="fragment"><strong>-c</strong>: Enllaça només el fitxer especificat.</li>
<li class="fragment"><strong>-o</strong>: Fitxer executable de sortida (per defecte a a.out).</li>
<li class="fragment"><strong>-I</strong>: Directoris on es cercaran els fitxers <strong>.h</strong>.</li>
<li class="fragment"><strong>-L</strong>: Directoris on es cercaran les biblioteques.</li>
<li class="fragment"><strong>-l</strong>: Biblioteques a enllaçar.</li>
<li class="fragment"><strong>-Wall</strong>: Mostra tots els missatges d’advertència.</li>
<li class="fragment"><strong>-Werror</strong>: Converteix els missatges d’advertència en errors.</li>
<li class="fragment"><strong>-Wextra</strong>: Mostra missatges d’advertència addicionals.</li>
<li class="fragment"><strong>…</strong>: Altres opcions.</li>
</ul>
</section>
<section id="el-nostre-primer-programa-hola-món" class="slide level2">
<h2>El nostre primer programa: Hola món</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ol type="1">
<li class="fragment"><strong>Preprocessador</strong>: El fitxer <em>stdio</em> proporciona la definició de la funció <strong>printf</strong>.</li>
<li class="fragment"><strong>main()</strong>: Funció principal i obligatòria. Aquesta no rep cap argument i retorna un enter.</li>
<li class="fragment">La funció <strong>printf</strong> rep un argument del tipus <code>char *</code>.</li>
<li class="fragment"><strong>return 0</strong>: Indica que tot ha anat bé i acaba la funció <em>main()</em>.</li>
</ol>
</div><div class="column" style="width:40%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb4-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb4-2"><a></a><span class="co">/* This is a comment */</span></span>
<span id="cb4-3"><a></a><span class="dt">int</span> main<span class="op">()</span></span>
<span id="cb4-4"><a></a><span class="op">{</span></span>
<span id="cb4-5"><a></a>    printf<span class="op">(</span><span class="st">"Hola món!</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb4-6"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-7"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a></a><span class="co"># Compilem hola.c</span></span>
<span id="cb5-2"><a></a><span class="fu">gcc</span> <span class="at">-o</span> hola hola.c </span>
<span id="cb5-3"><a></a><span class="co"># Executem hola</span></span>
<span id="cb5-4"><a></a><span class="ex">./hola</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<aside class="notes">
<p>La funció <strong>printf</strong> es troba a la biblioteca estàndard de C, podem consultar <code>man s3 printf</code> per obtenir més informació. Aquesta funció permet mostrar text per pantalla. Els arguments que rep són una cadena de caràcters i els valors que volem mostrar. Els valors es substitueixen a la cadena de caràcters mitjançant el format <code>%d</code> per a enters, <code>%f</code> per a nombres en punt flotant, <code>%c</code> per a caràcters i <code>%s</code> per a cadenes de caràcters. Els caràcters <code>\n</code> indiquen un salt de línia.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="el-nostre-primer-programa-amb-llibreries-externes" class="slide level2">
<h2>El nostre primer programa amb llibreries externes</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb6-1"><a></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb6-2"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb6-3"><a></a><span class="dt">int</span> main <span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb6-4"><a></a><span class="op">{</span></span>
<span id="cb6-5"><a></a>  <span class="dt">double</span> x <span class="op">=</span> <span class="fl">2.0</span><span class="op">;</span></span>
<span id="cb6-6"><a></a>  <span class="dt">double</span> y <span class="op">=</span> sqrt <span class="op">(</span>x<span class="op">);</span></span>
<span id="cb6-7"><a></a>  printf <span class="op">(</span><span class="st">"La rai­z cuadrada de </span><span class="sc">%f</span><span class="st"> es </span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb6-8"><a></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb6-9"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/arrel.c">sources/arrel.c</a></p>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a></a><span class="ex">//</span> Complilació amb ruta global a la llibreria</span>
<span id="cb7-2"><a></a><span class="fu">gcc</span> <span class="at">-Wall</span> SO_usingLibraries.c /usr/lib/x86_64-linux-gnu/libm.a <span class="at">-o</span> calc</span>
<span id="cb7-3"><a></a><span class="ex">//</span> Compilació utilitzant la forma abreujada</span>
<span id="cb7-4"><a></a><span class="fu">gcc</span> <span class="at">-Wall</span> SO_usingLibraries.c <span class="at">-lm</span> <span class="at">-o</span> calc</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<aside class="notes">
<p>Per obtenir informació sobre la funció <strong>sqrt</strong> podeu consultar la pàgina de manual amb la comanda <code>man -s3 sqrt</code>. Aquesta funció es troba a la biblioteca matemàtica, per això cal enllaçar-la amb el programa. Per això s’utilitza l’opció <strong>-lm</strong>. Quan compilem un programa en C, el compilador pot incorporar certes funcions de la biblioteca estàndard de forma automàtica perquè són part de les especificacions del llenguatge (com printf, scanf, etc.). No obstant això, altres funcions, com les de la biblioteca matemàtica, no es troben dins d’aquest conjunt i, per tant, cal especificar manualment que volem enllaçar-les amb el programa.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="activitat-calculadora-i" class="slide level2">
<h2>Activitat: Calculadora (I)</h2>
<div class="columns">
<div class="column" style="width:33%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb8-1"><a></a><span class="co">// calc.h</span></span>
<span id="cb8-2"><a></a><span class="pp">#ifndef CALC_H</span></span>
<span id="cb8-3"><a></a><span class="pp">#define CALC_H</span></span>
<span id="cb8-4"><a></a></span>
<span id="cb8-5"><a></a><span class="dt">double</span> suma<span class="op">(</span></span>
<span id="cb8-6"><a></a>  <span class="dt">double</span> a<span class="op">,</span> </span>
<span id="cb8-7"><a></a>  <span class="dt">double</span> b<span class="op">);</span></span>
<span id="cb8-8"><a></a></span>
<span id="cb8-9"><a></a><span class="pp">#ifndef CALC_H</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:33%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb9-1"><a></a><span class="co">// calc.c</span></span>
<span id="cb9-2"><a></a><span class="pp">#include </span><span class="im">"calc.h"</span></span>
<span id="cb9-3"><a></a></span>
<span id="cb9-4"><a></a><span class="dt">double</span> suma<span class="op">(</span></span>
<span id="cb9-5"><a></a>  <span class="dt">double</span> a<span class="op">,</span> </span>
<span id="cb9-6"><a></a>  <span class="dt">double</span> b<span class="op">)</span> </span>
<span id="cb9-7"><a></a>  <span class="op">{</span></span>
<span id="cb9-8"><a></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb9-9"><a></a>  <span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:33%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb10-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb10-2"><a></a><span class="pp">#include </span><span class="im">"calc.h"</span></span>
<span id="cb10-3"><a></a></span>
<span id="cb10-4"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-5"><a></a>  <span class="dt">double</span> a <span class="op">=</span> <span class="fl">2.0</span><span class="op">;</span></span>
<span id="cb10-6"><a></a>  <span class="dt">double</span> b <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span>
<span id="cb10-7"><a></a>  suma<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb10-8"><a></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb10-9"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<p><br></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a></a><span class="fu">gcc</span> <span class="at">-c</span> calc.c <span class="at">-o</span> calc.o</span>
<span id="cb11-2"><a></a><span class="fu">gcc</span> <span class="at">-c</span> main.c <span class="at">-o</span> main.o</span>
<span id="cb11-3"><a></a><span class="fu">gcc</span> calc.o main.o <span class="at">-o</span> calc</span>
<span id="cb11-4"><a></a><span class="ex">./calc</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="activitat-calculadora-ii" class="slide level2">
<h2>Activitat: Calculadora (II)</h2>
<div class="columns">
<div class="column" style="width:33%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb12-1"><a></a><span class="co">// calc.h</span></span>
<span id="cb12-2"><a></a><span class="pp">#ifndef CALC_H</span></span>
<span id="cb12-3"><a></a><span class="pp">#define CALC_H</span></span>
<span id="cb12-4"><a></a></span>
<span id="cb12-5"><a></a><span class="dt">double</span> potencia<span class="op">(</span></span>
<span id="cb12-6"><a></a>  <span class="dt">double</span> a<span class="op">,</span> </span>
<span id="cb12-7"><a></a>  <span class="dt">double</span> b<span class="op">);</span></span>
<span id="cb12-8"><a></a></span>
<span id="cb12-9"><a></a><span class="pp">#ifndef CALC_H</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:33%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb13-1"><a></a><span class="co">// calc.c</span></span>
<span id="cb13-2"><a></a><span class="pp">#include </span><span class="im">"calc.h"</span></span>
<span id="cb13-3"><a></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb13-4"><a></a><span class="dt">double</span> potencia<span class="op">(</span></span>
<span id="cb13-5"><a></a>  <span class="dt">double</span> a<span class="op">,</span> </span>
<span id="cb13-6"><a></a>  <span class="dt">double</span> b<span class="op">)</span> </span>
<span id="cb13-7"><a></a>  <span class="op">{</span></span>
<span id="cb13-8"><a></a>    <span class="cf">return</span> pow<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb13-9"><a></a>  <span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:33%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb14-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb14-2"><a></a><span class="pp">#include </span><span class="im">"calc.h"</span></span>
<span id="cb14-3"><a></a></span>
<span id="cb14-4"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb14-5"><a></a>  <span class="dt">double</span> a <span class="op">=</span> <span class="fl">2.0</span><span class="op">;</span></span>
<span id="cb14-6"><a></a>  <span class="dt">double</span> b <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span>
<span id="cb14-7"><a></a>  potencia<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb14-8"><a></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb14-9"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<p><br></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a></a><span class="fu">gcc</span> <span class="at">-c</span> calc.c <span class="at">-o</span> calc.o</span>
<span id="cb15-2"><a></a><span class="fu">gcc</span> <span class="at">-c</span> main.c <span class="at">-o</span> main.o</span>
<span id="cb15-3"><a></a><span class="fu">gcc</span> calc.o main.o <span class="at">-o</span> calc <span class="at">-lm</span></span>
<span id="cb15-4"><a></a><span class="ex">./calc</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section></section>
<section>
<section id="esquelet-dun-programa-en-c" class="title-slide slide level1 center">
<h1>Esquelet d’un programa en C</h1>

</section>
<section id="els-arguments-dentrada" class="slide level2">
<h2>Els arguments d’entrada</h2>
<p>La funció <strong>main()</strong> té dos arguments que tradicionalment s’anomenen <strong>argc</strong> (Longitud del vector d’argument) i <strong>argv</strong> (Matriu de punters de caràcters).</p>
<div class="columns">
<div class="column" style="width:60%;">
<h4 id="retorna-un-enter">Retorna un enter</h4>
<ul>
<li class="fragment">0: En cas d’èxit.</li>
<li class="fragment">-1 (negatiu): en cas de fallada.</li>
</ul>
</div><div class="column" style="width:40%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb16-1"><a></a><span class="dt">int</span> </span>
<span id="cb16-2"><a></a>main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> </span>
<span id="cb16-3"><a></a>     <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> </span>
<span id="cb16-4"><a></a><span class="op">{...}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a></a><span class="ex">./a.out</span> <span class="at">-o</span> foo <span class="at">-vv</span></span>
<span id="cb17-2"><a></a><span class="ex">argv</span> = [ <span class="st">"/path/to/a.out"</span>, </span>
<span id="cb17-3"><a></a>  <span class="st">"-o"</span> <span class="st">"foo"</span>, <span class="st">"-vv"</span> ]<span class="kw">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<ul>
<li class="fragment"><strong>Argv</strong> és una representació tokenitzada.</li>
<li class="fragment"><strong>Argv[0]</strong> mai està buit i sempre conté la ruta completa a l’executable.</li>
</ul>
<aside class="notes">
<p>Com ja hem vist la funció <strong>main()</strong> és la primera funció del vostre programa que s’executa quan comença a executar-se. Aquesta funció crida a **_start()**, que normalment proporciona la biblioteca de temps d’execució <em>C,</em> enllaçat automàticament quan es compila el programa.</p>
<p>La funció <strong>main()</strong> té dos arguments que tradicionalment s’anomenen <strong>argc</strong> (Longitud del vector d’argument) i argv (Matriu de punters de caràcters) i retorna un nombre enter amb signe. La majoria dels entorns Unix esperen que els programes tornin 0 (zero) en cas d’èxit i -1 (negatiu) en cas de fallada.</p>
<p>Argv és una representació tokenitzada de la línia d’ordres que va invocar el vostre programa. Argv[0] mai està buit i sempre conté la ruta completa a l’executable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="exemple-check_args.c" class="slide level2">
<h2>Exemple: <code>check_args.c</code></h2>
<div class="columns">
<div class="column" style="width:45%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb18-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb18-2"><a></a></span>
<span id="cb18-3"><a></a><span class="dt">int</span></span>
<span id="cb18-4"><a></a>main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">**</span>argv<span class="op">)</span> <span class="op">{</span></span>
<span id="cb18-5"><a></a></span>
<span id="cb18-6"><a></a>  <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb18-7"><a></a></span>
<span id="cb18-8"><a></a>  <span class="cf">for</span> <span class="op">(</span>i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span>argc<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb18-9"><a></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> argv<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb18-10"><a></a>  <span class="op">}</span></span>
<span id="cb18-11"><a></a></span>
<span id="cb18-12"><a></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb18-13"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode numberSource sh number-lines code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a></a><span class="fu">gcc</span> check_args.c <span class="at">-o</span> check_args</span>
<span id="cb19-2"><a></a><span class="ex">./check_args</span> a.out</span>
<span id="cb19-3"><a></a><span class="ex">./check_args</span> <span class="pp">*</span>.c</span>
<span id="cb19-4"><a></a><span class="ex">./check_args</span> <span class="va">$USER</span> <span class="va">$PWD</span> <span class="va">$SHELL</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:55%;">
<ul>
<li class="fragment">Aquest programa ens permet observa com es capturen els arguments.</li>
<li class="fragment">Ara executarem aquest programa amb els diferents tipus de shell que tenim instal·lades.</li>
<li class="fragment">Per modificar la shell: <code>chsh -s /bin/sh jordi</code>.</li>
</ul>
</div></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/check_args.c">sources/check_args.c</a></p>
</div>
</section>
<section id="include" class="slide level2">
<h2>Include</h2>
<p>En el llenguatge de programació C, la directiva <strong>#include</strong> diu al preprocessador que insereixi el contingut d’un altre fitxer al codi font en el punt on es trobi la directiva <strong>#include</strong>.</p>
<ul>
<li class="fragment"><p><code>#include &lt;header_file&gt;</code>: El preprocessador cercarà una ruta de directori predeterminada per localitzar el fitxer de capçalera. Normalment, els fitxers són: <strong>/usr/include</strong>.</p></li>
<li class="fragment"><p><code>#include "header_file"</code>: El preprocessador buscarà el fitxer de capçalera al mateix directori que el fitxer font</p></li>
</ul>
</section>
<section id="include-header-més-improtants" class="slide level2 smaller">
<h2>Include: Header més improtants</h2>
<table class="caption-top">
<colgroup>
<col style="width: 19%">
<col style="width: 80%">
</colgroup>
<thead>
<tr class="header">
<th>Header</th>
<th>Funcionalitat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>stdio</td>
<td>Subministra entrada i sortida: funcions <em>FILE, stdin, stdout, stderr i fprint()</em>.</td>
</tr>
<tr class="even">
<td>stdlib</td>
<td>Subministra funcions d’utilitat: <em>malloc(), calloc() i realloc()</em>.</td>
</tr>
<tr class="odd">
<td>unistd</td>
<td>Subministraments <em>EXIT_FAILURE, EXIT_SUCCESS</em>.</td>
</tr>
<tr class="even">
<td>errno</td>
<td>Defineix la variable errno externa i tots els valors que pot prendre.</td>
</tr>
<tr class="odd">
<td>assert</td>
<td>Subministra funcions de diagnòstic.</td>
</tr>
<tr class="even">
<td>time</td>
<td>Subministraments Funcions de data i hora.</td>
</tr>
<tr class="odd">
<td>math</td>
<td>Proporciona funcions de suport matemàtiques.</td>
</tr>
<tr class="even">
<td>string</td>
<td>Proporciona funcions <em>memcpy(), memset() i strlen()</em>.</td>
</tr>
<tr class="odd">
<td>getopt</td>
<td>Proporciona <em>optarg, opterr i getopt()</em> externs.</td>
</tr>
</tbody>
</table>
</section>
<section id="define" class="slide level2 smaller">
<h2>Define</h2>
<p>La directiva <strong>#define</strong> permet la definició de macros dins del codi font. Aquestes definicions de macro permeten declarar valors constants per utilitzar-los en tot el codi. Les definicions de macro no són variables i el programa no les pot canviar. Utilitzeu aquesta sintaxi quan creeu constants que representen nombres, cadenes o expressions.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb20-1"><a></a><span class="pp">#</span><span class="er">definir el valor CNAME</span></span>
<span id="cb20-2"><a></a><span class="pp">#</span><span class="er">definir CNAME (expressió)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb21-1"><a></a><span class="pp">#define DEFAULT_PROGNAME </span><span class="st">"myProgName"</span></span>
<span id="cb21-2"><a></a><span class="pp">#define BUFSIZE </span><span class="dv">4096</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:40%;">
<ul>
<li class="fragment">L’expressió s’ha d’entregar entre parèntesis si conté operadors.</li>
<li class="fragment">NO poseu <span class="alert"><strong>;</strong></span> al final de les sentències <strong>#define</strong>.</li>
<li class="fragment">Quan s’anomena un <strong>#define</strong> per distingir-lo dels noms de variables i funcions, utilitzeu majúscules.</li>
</ul>
</div></div>
</section>
<section id="external-declarations" class="slide level2">
<h2>External declarations</h2>
<p>Una declaració externa porta aquest nom a l’espai de noms de la unitat de compilació actual (també conegut com <em>fitxer</em>) i permet al programa accedir a aquesta variable. La paraula clau <strong>extern</strong> amplia la visibilitat de la funció a tot el programa, la funció es pot utilitzar (anomenar) a qualsevol lloc de qualsevol dels fitxers de tot el programa, sempre que aquests fitxers continguin una declaració de la funció.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb22-1"><a></a><span class="kw">extern</span> <span class="dt">int</span> errno<span class="op">;</span></span>
<span id="cb22-2"><a></a><span class="co">// errno s'utilitza com a canal de comunicació per la  biblioteca </span></span>
<span id="cb22-3"><a></a><span class="co">// C estàndard per comunicar el motiu de fallada d'una funció determinada.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="llibreria-errno" class="slide level2">
<h2>Llibreria errno</h2>
<p>La variable global <strong>errno</strong> és defineix a la biblioteca <em>errno.h</em>.</p>
<ul>
<li class="fragment">Aquest valor de variable només és rellevant quan la trucada retorna un error (normalment el codi <span class="alert">-1</span>).</li>
<li class="fragment">Per més informació: <code>$ man errno</code></li>
<li class="fragment">Es pot veure un missatge d’error descriptiu identificat per <strong>errno</strong> utilitzant la funció <code>perror</code> de la biblioteca <code>&lt;stdio.h&gt;</code>. Funció: <code>void perror(const char*);</code> Aquesta funció primer mostra el missatge i després l’error. <code>#include &lt;stdio.h&gt;</code>.</li>
</ul>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/errno_example.c">sources/errno_example.c</a></p>
</div>
</section>
<section id="activitat-echo-amb-c" class="slide level2">
<h2>Activitat: <code>echo</code> amb c</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb23-1"><a></a></span>
<span id="cb23-2"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb23-3"><a></a></span>
<span id="cb23-4"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb23-5"><a></a>  <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb23-6"><a></a>  <span class="cf">if</span> <span class="op">(</span>argc <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-7"><a></a>    fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">"Usage: </span><span class="sc">%s</span><span class="st"> &lt;string&gt;</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> argv<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb23-8"><a></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb23-9"><a></a>  <span class="op">}</span></span>
<span id="cb23-10"><a></a>  <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> argc<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb23-11"><a></a>    printf<span class="op">(</span><span class="st">"</span><span class="sc">%s</span><span class="st"> "</span><span class="op">,</span> argv<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb23-12"><a></a>  <span class="op">}</span></span>
<span id="cb23-13"><a></a>  printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb23-14"><a></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb23-15"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/echo.c">sources/echo.c</a></p>
</div>
</section>
<section id="activitat-cd-amb-c" class="slide level2">
<h2>Activitat: <code>cd</code> amb c</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb24-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">  </span><span class="co">// Per fprintf() i perror()</span></span>
<span id="cb24-2"><a></a><span class="pp">#include </span><span class="im">&lt;unistd.h&gt;</span><span class="pp"> </span><span class="co">// Per chdir()</span></span>
<span id="cb24-3"><a></a></span>
<span id="cb24-4"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb24-5"><a></a>    <span class="cf">if</span> <span class="op">(</span>argc <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-6"><a></a>        fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">"Usage: </span><span class="sc">%s</span><span class="st"> &lt;directory&gt;</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> argv<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb24-7"><a></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb24-8"><a></a>    <span class="op">}</span></span>
<span id="cb24-9"><a></a>    <span class="cf">if</span> <span class="op">(</span>chdir<span class="op">(</span>argv<span class="op">[</span><span class="dv">1</span><span class="op">])</span> <span class="op">==</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-10"><a></a>        perror<span class="op">(</span><span class="st">"chdir"</span><span class="op">);</span></span>
<span id="cb24-11"><a></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  </span>
<span id="cb24-12"><a></a>    <span class="op">}</span></span>
<span id="cb24-13"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  </span>
<span id="cb24-14"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/cd.c">sources/cd.c</a></p>
</div>
</section></section>
<section>
<section id="makefile" class="title-slide slide level1 center">
<h1>Makefile</h1>

</section>
<section id="què-és-un-makefile" class="slide level2">
<h2>Què és un Makefile?</h2>
<p>Un fitxer Makefile és un fitxer de text que conté un conjunt de regles utilitzades per construir un programa. Aquestes regles indiquen al sistema com compilar i enllaçar el programa.</p>
<ul>
<li class="fragment"><strong>Automatització</strong>: Simplifica el procés de compilació i enllaçat.</li>
<li class="fragment"><strong>Eficiència</strong>: Només es compilen els fitxers modificats, no tot el projecte.</li>
<li class="fragment"><strong>Organització</strong>: Organitza el codi i les dependències de manera estructurada.</li>
</ul>
</section>
<section id="organització-del-makefile" class="slide level2">
<h2>Organització del Makefile</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode numberSource makefile number-lines code-with-copy"><code class="sourceCode makefile"><span id="cb25-1"><a></a><span class="dv">target:</span><span class="dt"> dependencies</span></span>
<span id="cb25-2"><a></a><span class="er">    </span>command</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li class="fragment"><strong>target</strong>: Nom de l’objectiu (executable o fitxer objecte).</li>
<li class="fragment"><strong>dependencies</strong>: Fitxers necessaris per a generar l’objectiu.</li>
<li class="fragment"><strong>command</strong>: Comandaments per a compilar o generar l’objectiu.</li>
</ul>
</section>
<section id="plantilla-per-compilar-un-programa" class="slide level2">
<h2>Plantilla per compilar un programa</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode numberSource makefile number-lines code-with-copy"><code class="sourceCode makefile"><span id="cb26-1"><a></a><span class="dt">CC</span> <span class="ch">=</span><span class="st"> gcc</span></span>
<span id="cb26-2"><a></a><span class="dt">CFLAGS</span> <span class="ch">=</span><span class="st"> -Wall -O2</span></span>
<span id="cb26-3"><a></a><span class="dt">TARGET</span> <span class="ch">=</span><span class="st"> programa</span></span>
<span id="cb26-4"><a></a></span>
<span id="cb26-5"><a></a><span class="dv">all:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">TARGET</span><span class="ch">)</span></span>
<span id="cb26-6"><a></a></span>
<span id="cb26-7"><a></a><span class="dv">$(TARGET):</span><span class="dt"> programa.c</span></span>
<span id="cb26-8"><a></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -o <span class="ch">$(</span><span class="dt">TARGET</span><span class="ch">)</span> programa.c</span>
<span id="cb26-9"><a></a></span>
<span id="cb26-10"><a></a><span class="dv">clean:</span></span>
<span id="cb26-11"><a></a><span class="er">    </span>rm -f <span class="ch">$(</span><span class="dt">TARGET</span><span class="ch">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<aside class="notes">
<p>La opció <code>-O2</code> és un nivell d’optimització per al compilador. Indica al compilador que optimitzi el codi generat per a un millor rendiment. Inclou un conjunt d’optimitzacions per millorar la velocitat i la grandària del codi. Tenim diferents nivells d’optimització, per exemple <code>-O0</code>, <code>-O1</code>, <code>-O2</code>, <code>-O3</code>, <code>-Os</code>, <code>-Og</code>, <code>-Ofast</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="gestió-entradasortida" class="title-slide slide level1 center">
<h1>Gestió Entrada/Sortida</h1>

</section>
<section id="com-gestiona-lentrada-i-sortida-el-so" class="slide level2 smaller">
<h2>Com gestiona l’entrada i sortida el SO?</h2>
<p>Uns dels objectius del SO és proporcionar una màquina virtual que uniformitzi la complexitat dels dispositius d’E/S, necessitem independitzar les operacions i els dispositius.</p>
<ul>
<li class="fragment"><p><strong>Dispositius reals</strong>: Existeix en el món real. Combinació de diferents elements <em>harwdare</em> i <em>software</em>.</p></li>
<li class="fragment"><p><strong>Dispositius físics</strong>: Formats pel perifèric i pel seu hardware de control i el programari que el gestiona (<strong>drivers</strong>).</p></li>
<li class="fragment"><p><strong>Dispositius lògics</strong>: El resultat d’un programari del sistema que crea aquest dispositiu.</p>
<ul>
<li class="fragment"><strong>Null</strong>: Dispositiu d’E/S sobre el qual podem escriure tot el que vulguem i sempre és buit.</li>
<li class="fragment"><strong>Finestra</strong>: Dispositiu <em>lògic</em> d’E/S que combina 4 dispositius <em>físics</em>: pantalla, teclat, memòria i un apuntador (ratolí).</li>
</ul></li>
</ul>
<aside class="notes">
<p>L’espai lògic és una agrupació d’informació emmagatzemada a la memòria física utilitzant la memòria virtual. Per tant, l’espai lògic d´’un procés es pot veure com un dispositiu entrada/sortida. Us podeu imaginar aquest espai lògic com un fitxer.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="esquema-de-dispositius" class="slide level2">
<h2>Esquema de dispositius</h2>

<img data-src="../figures/slides/01-c/esquema-dispositius.png" style="width:85.0%" class="r-stretch"></section>
<section id="dispositius-virtuals" class="slide level2 smaller">
<h2>Dispositius virtuals</h2>
<p>Un <strong>dispositiu virtual</strong> és un dispositiu que a priori no està associat a cap <strong>dispositiu real</strong>. <em>En temps d’execució el sistema operatiu associarà el dispositiu virtual amb el dispositiu real</em>.</p>
<ul>
<li class="fragment"><strong>Associació implícita</strong>: El sistema i el procés que ha iniciat l’execució són els encarregats de fer l’associació. Els dispositius virtuals associats de manera implícita són els dispositius estàndard, en el cas d’Unix tenim entrada estàndard (<strong>stdin</strong>), sortida estàndard(<strong>stdout</strong>) i sortida estàndard d’errors (<strong>stderr</strong>).</li>
<li class="fragment"><strong>Associació explícita</strong>: Aquesta associació es dona entre un dispositiu virtual i un dispositiu real pel mateix programa durant l’execució. Per efectuar-la el programa necessita realitzar una operació específica que donat un dispositiu real generi un dispositiu virtual associat. A partir d’aquest moment el programa realitzarà les operacions d’E/S del dispositiu mitjançant el dispositiu virtual.</li>
</ul>
</section>
<section id="operacions-es" class="slide level2 smaller">
<h2>Operacions E/S</h2>
<p>El processos utilitzen els descriptors de fitxers per accedir als dispositius un cop ja han estat oberts per llegir i escriure informació.</p>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="operacions">Operacions</h3>
<ul>
<li class="fragment"><strong>llegir</strong>(dispositiu,buffer de lectura,posició)</li>
<li class="fragment"><strong>escriure</strong>(dispositiu,buffer escriptura,posició)</li>
<li class="fragment"><strong>obrir</strong>(dispositiu, operació)</li>
<li class="fragment"><strong>tancar</strong>(dispositiu)</li>
<li class="fragment"><strong>posicionar</strong>(dispositiu, posició)</li>
</ul>
</div><div class="column" style="width:40%;">
<h3 id="descriptors">Descriptors</h3>
<ul>
<li class="fragment">0: Entrada estàndard (<strong>stdin</strong>)</li>
<li class="fragment">1: Sortida estàndard(<strong>stdout</strong>)</li>
<li class="fragment">2: Sortida estàndard d’errors (<strong>stderr</strong>)</li>
</ul>
</div></div>
<aside class="notes">
<p>Fixeu-vos que el fet d’utilitzar dispositius virtuals no soluciona el problema de la independència si el sistema operatiu únicament utilitza els dispositius virtuals i aquests han de conèixer les peculiaritats dels dispositius reals per poder operar-hi. Per tant, necessitem una nova capa per damunt dels drivers que uniformitzi les operacions.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="descriptors-de-fitxer" class="slide level2">
<h2>Descriptors de fitxer</h2>

<img data-src="../figures/slides/01-c/descriptors-fitxers.png" style="width:80.0%" class="r-stretch"></section>
<section id="fitxers" class="slide level2 smaller">
<h2>Fitxers</h2>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li class="fragment">Un fitxer és una seqüència contigua de bytes.</li>
<li class="fragment">El sistema operatiu no imposa cap format específic.</li>
<li class="fragment">Cada byte es pot adreçar individualment.</li>
<li class="fragment">Un descriptor de fitxer és un nombre enter positiu específic que identifica els seus fixers oberts.</li>
<li class="fragment">Tots els fitxers oberts per una aplicació es tanquen automàticament quan el procés acaba.</li>
</ul>
</div><div class="column" style="width:60%;">
<table class="caption-top">
<thead>
<tr class="header">
<th>Valor</th>
<th>Significat</th>
<th>Defecte</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>stdin (teclat)</td>
<td>SI</td>
</tr>
<tr class="even">
<td>1</td>
<td>stdout (pantalla)</td>
<td>SI</td>
</tr>
<tr class="odd">
<td>2</td>
<td>stderr (pantalla)</td>
<td>SI</td>
</tr>
<tr class="even">
<td><span class="math inline">\(3...N\)</span></td>
<td>disponibles pels usuaris</td>
<td>NO</td>
</tr>
</tbody>
</table>
<ul>
<li class="fragment"><strong>open()</strong> : obre fitxers per llegir i/o escriure o per crear-los.</li>
<li class="fragment"><strong>creat()</strong> : crea un fitxer buit.</li>
<li class="fragment"><strong>read()</strong> : llegeix informació d’un fitxer.</li>
<li class="fragment"><strong>write()</strong> : escriu informació en un fitxer.</li>
<li class="fragment"><strong>lseek()</strong> : aneu a un byte específic del fitxer.</li>
<li class="fragment"><strong>unlink()</strong> : elimina un fitxer.</li>
<li class="fragment"><strong>fcntl()</strong> : controla els atributs d’un fitxer.</li>
</ul>
</div></div>
</section>
<section id="obrint-fitxers" class="slide level2 smaller">
<h2>Obrint fitxers</h2>
<p>Per crear o obrir un fitxer fem anar les crides a sistema <em>open()</em> i <em>creat()</em>. Aquestes retornen la seva descripció, o retornen -1 si hi ha hagut algun error.</p>
<div class="columns">
<div class="column" style="width:40%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb27-1"><a></a><span class="pp">#include </span><span class="im">&lt; sys/types.h&gt;</span><span class="pp"> </span></span>
<span id="cb27-2"><a></a><span class="pp">#include </span><span class="im">&lt; sys/stat.h&gt;</span><span class="pp"> </span></span>
<span id="cb27-3"><a></a><span class="pp">#include </span><span class="im">&lt; fcntl.h&gt;</span><span class="pp"> </span></span>
<span id="cb27-4"><a></a></span>
<span id="cb27-5"><a></a><span class="dt">int</span> open <span class="op">(</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">,</span> </span>
<span id="cb27-6"><a></a>  <span class="dt">int</span> flags <span class="op">[,</span> mode_t mode <span class="op">]);</span></span>
<span id="cb27-7"><a></a><span class="dt">int</span> creat <span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">,</span> </span>
<span id="cb27-8"><a></a>  mode_t mode<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment"><strong>path</strong>: cadena amb el camí relatiu o absolut al fitxer.</li>
<li class="fragment"><strong>flags</strong>: mètode d’obertura de fitxer:
<ul>
<li class="fragment"><em>O_RDONLY</em> - només lectura.</li>
<li class="fragment"><em>O_WRONLY</em> - només escriptura.</li>
<li class="fragment"><em>O_RDWR</em> - lectura i escriptura.</li>
<li class="fragment"><em>O_CREAT</em> - crea el fitxer si no existeix.</li>
<li class="fragment"><em>O_TRUNC</em> - si existeix, l’obre i es trunca a 0 bytes.</li>
<li class="fragment"><em>O_APPEND</em> - escriu al final del fitxer.</li>
</ul></li>
<li class="fragment"><strong>mode</strong>: especifica els permisos si es crea un fitxer nou (0644: -rw-r–r–)</li>
</ul>
</div></div>
<aside class="notes">
<p>Podeu consultar la pàgina de manual de les crides a sistema per obtenir més informació:</p>
<ul>
<li><code>man -s2 fcntl</code></li>
<li><code>man -s2 stat</code></li>
<li><code>man -s2 open</code></li>
<li><code>man creat</code></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="tancant-fitxers" class="slide level2">
<h2>Tancant fitxers</h2>
<p>Per tancar un fitxer utilitzarem <em>close()</em>. Aquesta crida a sistema desassocia el fitxer del procés. Retorna 0 si tot funciona correctament, en ca d’error <span class="alert">-1</span>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb28-1"><a></a><span class="pp">#include </span><span class="im">&lt;unistd.h&gt;</span><span class="pp"> </span></span>
<span id="cb28-2"><a></a><span class="dt">int</span> close<span class="op">(</span><span class="dt">int</span> fd<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li class="fragment"><strong>fd</strong>: Descriptor de fitxer que volem tancar.</li>
</ul>
</section>
<section id="descriptors-de-fitxers-i" class="slide level2">
<h2>Descriptors de fitxers (I)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb29-1"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb29-2"><a></a> </span>
<span id="cb29-3"><a></a> <span class="dt">int</span> fd1<span class="op">,</span> fd2<span class="op">,</span> fd3<span class="op">;</span></span>
<span id="cb29-4"><a></a> <span class="dt">FILE</span> <span class="op">*</span>f<span class="op">;</span></span>
<span id="cb29-5"><a></a> printf<span class="op">(</span><span class="st">"STDIN_FILENO: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> STDIN_FILENO<span class="op">);</span> </span>
<span id="cb29-6"><a></a> printf<span class="op">(</span><span class="st">"stdout: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> fileno<span class="op">(</span>stdout<span class="op">));</span> </span>
<span id="cb29-7"><a></a> printf<span class="op">(</span><span class="st">"STDERR_FILENO: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> STDERR_FILENO<span class="op">);</span></span>
<span id="cb29-8"><a></a></span>
<span id="cb29-9"><a></a> printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">Opening /dev/zero...</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb29-10"><a></a> <span class="cf">if</span> <span class="op">((</span>fd1 <span class="op">=</span> open<span class="op">(</span><span class="st">"/dev/zero"</span><span class="op">,</span> O_RDONLY<span class="op">))</span> <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-11"><a></a>  fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">"Unable to open /dev/zero: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> strerror<span class="op">(</span>errno<span class="op">));</span></span>
<span id="cb29-12"><a></a> <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb29-13"><a></a>  printf<span class="op">(</span><span class="st">"fd1: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> fd1<span class="op">);</span></span>
<span id="cb29-14"><a></a> <span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/descriptors.c">sources/descriptors.c</a></p>
</div>
</section>
<section id="descriptors-de-fitxers-ii" class="slide level2">
<h2>Descriptors de fitxers (II)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb30-1"><a></a> printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">Opening /dev/zero a second time...</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb30-2"><a></a> <span class="cf">if</span> <span class="op">((</span>fd2 <span class="op">=</span> open<span class="op">(</span><span class="st">"/dev/zero"</span><span class="op">,</span> O_RDONLY<span class="op">))</span> <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-3"><a></a>  fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">"Unable to open /dev/zero: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> strerror<span class="op">(</span>errno<span class="op">));</span></span>
<span id="cb30-4"><a></a>  exit<span class="op">(</span>EXIT_FAILURE<span class="op">);</span></span>
<span id="cb30-5"><a></a> <span class="op">}</span></span>
<span id="cb30-6"><a></a> printf<span class="op">(</span><span class="st">"fd2: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> fd2<span class="op">);</span></span>
<span id="cb30-7"><a></a></span>
<span id="cb30-8"><a></a> printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">Now closing fd1, but keeping fd2 open..</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb30-9"><a></a> <span class="op">(</span><span class="dt">void</span><span class="op">)</span>close<span class="op">(</span>fd1<span class="op">);</span></span>
<span id="cb30-10"><a></a></span>
<span id="cb30-11"><a></a> printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">Opening /dev/zero a third time...</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb30-12"><a></a> <span class="cf">if</span> <span class="op">((</span>fd3 <span class="op">=</span> open<span class="op">(</span><span class="st">"/dev/zero"</span><span class="op">,</span> O_RDONLY<span class="op">))</span> <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-13"><a></a>  fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">"Unable to open /dev/zero: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> strerror<span class="op">(</span>errno<span class="op">));</span></span>
<span id="cb30-14"><a></a>  exit<span class="op">(</span>EXIT_FAILURE<span class="op">);</span></span>
<span id="cb30-15"><a></a> <span class="op">}</span></span>
<span id="cb30-16"><a></a> printf<span class="op">(</span><span class="st">"fd3: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> fd3<span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="descriptors-de-fitxers-iii" class="slide level2">
<h2>Descriptors de fitxers (III)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb31-1"><a></a> printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">Now closing fd2 and fd3.</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb31-2"><a></a> <span class="op">(</span><span class="dt">void</span><span class="op">)</span>close<span class="op">(</span>fd2<span class="op">);</span></span>
<span id="cb31-3"><a></a> <span class="op">(</span><span class="dt">void</span><span class="op">)</span>close<span class="op">(</span>fd3<span class="op">);</span></span>
<span id="cb31-4"><a></a></span>
<span id="cb31-5"><a></a> printf<span class="op">(</span><span class="st">"Now opening /dev/zero as a stream.</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb31-6"><a></a> <span class="cf">if</span> <span class="op">((</span>f <span class="op">=</span> fopen<span class="op">(</span><span class="st">"/dev/zero"</span><span class="op">,</span> <span class="st">"r"</span><span class="op">))</span> <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-7"><a></a>  fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">"Unable to open /dev/zero: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> strerror<span class="op">(</span>errno<span class="op">));</span></span>
<span id="cb31-8"><a></a>  exit<span class="op">(</span>EXIT_FAILURE<span class="op">);</span></span>
<span id="cb31-9"><a></a> <span class="op">}</span></span>
<span id="cb31-10"><a></a> printf<span class="op">(</span><span class="st">"f: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> fileno<span class="op">(</span>f<span class="op">));</span></span>
<span id="cb31-11"><a></a> <span class="op">(</span><span class="dt">void</span><span class="op">)</span>fclose<span class="op">(</span>f<span class="op">);</span></span>
<span id="cb31-12"><a></a></span>
<span id="cb31-13"><a></a> <span class="cf">return</span> EXIT_SUCCESS<span class="op">;</span></span>
<span id="cb31-14"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="llegint-fitxers-i" class="slide level2 smaller">
<h2>Llegint fitxers (I)</h2>
<div class="columns">
<div class="column" style="width:30%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb32-1"><a></a><span class="pp">#include </span><span class="im">&lt;unistd.h&gt;</span><span class="pp"> </span></span>
<span id="cb32-2"><a></a><span class="dt">ssize_t</span> read</span>
<span id="cb32-3"><a></a><span class="op">(</span><span class="dt">int</span> fd<span class="op">,</span> </span>
<span id="cb32-4"><a></a> <span class="dt">void</span> <span class="op">*</span>buf<span class="op">,</span> <span class="dt">size_t</span><span class="op">);</span></span>
<span id="cb32-5"><a></a></span>
<span id="cb32-6"><a></a><span class="dt">ssize_t</span> write</span>
<span id="cb32-7"><a></a><span class="op">(</span><span class="dt">int</span> fd<span class="op">,</span> </span>
<span id="cb32-8"><a></a> <span class="dt">void</span> <span class="op">*</span>buf<span class="op">,</span> <span class="dt">size_t</span><span class="op">);</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:70%;">
<p><code>read()</code>: Intenta llegir/escriure fins a <strong>nbytes</strong> bytes del fitxer especificat per <strong>fd</strong> i emmagatzemar-los a l’àrea de memòria que comença a <strong>buf</strong>. Paràmetres:</p>
<ul>
<li class="fragment"><strong>fd</strong>: descriptor del fitxer que es llegirà/escriurà.</li>
<li class="fragment"><strong>nbytes</strong>: nombre de bytes a llegir/escriure.</li>
<li class="fragment"><strong>buf</strong> : apunta a la memòria intermèdia on es desarà la informació de lectura/escriptura. Retorna:
<ul>
<li class="fragment">Si té èxit, retorna el nombre de bytes de lectura/escriptura (0 significa final del fitxer).</li>
<li class="fragment">Si hi ha error, retorna <span class="alert">-1</span> i especifica el motiu en <strong>errno</strong>.</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="llegint-fitxer-ii" class="slide level2">
<h2>Llegint fitxer (II)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb33-1"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb33-2"><a></a>  <span class="dt">char</span> string<span class="op">[</span><span class="dv">11</span><span class="op">];</span> <span class="dt">int</span> b_read<span class="op">;</span></span>
<span id="cb33-3"><a></a>  <span class="dt">int</span> file <span class="op">=</span> open <span class="op">(</span><span class="st">"my_file"</span><span class="op">,</span> O_RDONLY<span class="op">);</span> </span>
<span id="cb33-4"><a></a>  <span class="cf">if</span><span class="op">(</span>file <span class="op">==</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span> </span>
<span id="cb33-5"><a></a>    perror<span class="op">(</span><span class="st">"Error while opening file"</span><span class="op">);</span></span>
<span id="cb33-6"><a></a>    exit<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb33-7"><a></a>  <span class="op">}</span></span>
<span id="cb33-8"><a></a>  b_read <span class="op">=</span> read<span class="op">(</span>file<span class="op">,</span> string<span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb33-9"><a></a>  close<span class="op">(</span>file<span class="op">);</span></span>
<span id="cb33-10"><a></a>  string<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb33-11"><a></a>  printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> B have been read. The obtained string is: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> </span>
<span id="cb33-12"><a></a>    b_read<span class="op">,</span> string<span class="op">);</span></span>
<span id="cb33-13"><a></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb33-14"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/llegir_fitxer.c">sources/llegir_fitxer.c</a></p>
</div>
<aside class="notes">
<p>Per generar un fitxer amb dades aleatòries: <code>head -c 1024 &lt;/dev/urandom &gt; my_file</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="escrivint-fitxers" class="slide level2">
<h2>Escrivint fitxers</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb34-1"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb34-2"><a></a></span>
<span id="cb34-3"><a></a>  <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> string <span class="op">=</span> <span class="st">"</span><span class="sc">\n</span><span class="st">Winter is coming</span><span class="sc">\n\n</span><span class="st">"</span><span class="op">;</span></span>
<span id="cb34-4"><a></a></span>
<span id="cb34-5"><a></a>  <span class="dt">int</span> file <span class="op">=</span> open<span class="op">(</span><span class="st">"new_file"</span><span class="op">,</span> O_CREAT<span class="op">|</span>O_WRONLY<span class="op">,</span> <span class="bn">0644</span><span class="op">);</span></span>
<span id="cb34-6"><a></a></span>
<span id="cb34-7"><a></a>  <span class="cf">if</span><span class="op">(</span>file <span class="op">==</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span> </span>
<span id="cb34-8"><a></a>    perror<span class="op">(</span><span class="st">"Error when opening file"</span><span class="op">);</span></span>
<span id="cb34-9"><a></a>    exit<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb34-10"><a></a>  <span class="op">}</span></span>
<span id="cb34-11"><a></a></span>
<span id="cb34-12"><a></a>  write<span class="op">(</span>file<span class="op">,</span> string<span class="op">,</span> strlen<span class="op">(</span>string<span class="op">));</span></span>
<span id="cb34-13"><a></a>  close<span class="op">(</span>file<span class="op">);</span></span>
<span id="cb34-14"><a></a></span>
<span id="cb34-15"><a></a>  exit<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb34-16"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/escriure_fitxer.c">sources/escriure_fitxer.c</a></p>
</div>
</section>
<section id="llegintescrivint-en-llocs-específics" class="slide level2 smaller">
<h2>Llegint/Escrivint en llocs específics</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb35-1"><a></a><span class="pp">#include </span><span class="im">&lt; sys/types.h&gt;</span><span class="pp"> </span></span>
<span id="cb35-2"><a></a><span class="pp">#include </span><span class="im">&lt; unistd.h&gt;</span><span class="pp"> </span></span>
<span id="cb35-3"><a></a>off_t lseek<span class="op">(</span> <span class="dt">int</span> fd<span class="op">,</span></span>
<span id="cb35-4"><a></a> off_t offset<span class="op">,</span> </span>
<span id="cb35-5"><a></a> <span class="dt">int</span> whence<span class="op">)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:60%;">
<ul>
<li class="fragment"><strong>fd</strong>: descriptor de fitxer.</li>
<li class="fragment"><strong>offset</strong>: desplaçament relatiu del punter en bytes.</li>
<li class="fragment"><strong>whence</strong>: directiva de desplaçament:
<ul>
<li class="fragment"><em>SEEK_SET</em>: el punter es col·loca <strong>offset</strong> bytes.</li>
<li class="fragment"><em>SEEK_CUR</em>: el punter es mou <strong>offset</strong> bytes des de la seva posició actual.</li>
<li class="fragment"><em>SEEK_END</em>: el punter es mou <strong>offset</strong> bytes des del final del fitxer.</li>
</ul></li>
<li class="fragment">Si té èxit, retorna la posició absoluta del punter (en bytes).</li>
<li class="fragment">Si hi ha error, retorna <span class="alert">-1</span> i especifica el motiu en errno.</li>
</ul>
</div></div>
</section>
<section id="llegint-fitxers-en-llocs-específics" class="slide level2">
<h2>Llegint fitxers en llocs específics</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36" size="footnotesize"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb36-1"><a></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> argv<span class="op">[])</span> <span class="op">{</span></span>
<span id="cb36-2"><a></a>  <span class="dt">char</span> string<span class="op">[</span><span class="dv">11</span><span class="op">];</span></span>
<span id="cb36-3"><a></a>  <span class="dt">int</span> b_read<span class="op">;</span></span>
<span id="cb36-4"><a></a></span>
<span id="cb36-5"><a></a>  <span class="dt">int</span> file <span class="op">=</span> open <span class="op">(</span><span class="st">"my_file"</span><span class="op">,</span> O_RDONLY<span class="op">);</span> </span>
<span id="cb36-6"><a></a></span>
<span id="cb36-7"><a></a>  lseek<span class="op">(</span>file<span class="op">,</span> <span class="dv">46</span><span class="op">,</span> SEEK_SET<span class="op">);</span></span>
<span id="cb36-8"><a></a>  b_read <span class="op">=</span> read<span class="op">(</span>file<span class="op">,</span> string<span class="op">,</span> <span class="dv">10</span><span class="op">);</span> <span class="co">// Read 10 bytes</span></span>
<span id="cb36-9"><a></a>  close<span class="op">(</span>file<span class="op">);</span></span>
<span id="cb36-10"><a></a></span>
<span id="cb36-11"><a></a>  string<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb36-12"><a></a>  printf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st"> B have been read. The obtained string is: </span><span class="sc">%s\n</span><span class="st">"</span><span class="op">,</span> </span>
<span id="cb36-13"><a></a>  b_read<span class="op">,</span> string<span class="op">);</span></span>
<span id="cb36-14"><a></a></span>
<span id="cb36-15"><a></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb36-16"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/llegir_fitxer2.c">sources/llegir_fitxer2.c</a></p>
</div>
</section>
<section id="escrivint-en-llocs-específics" class="slide level2">
<h2>Escrivint en llocs específics</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb37-1"><a></a><span class="dt">char</span> buf1<span class="op">[]</span> <span class="op">=</span> <span class="st">"abcdefghij"</span><span class="op">;</span></span>
<span id="cb37-2"><a></a><span class="dt">char</span> buf2<span class="op">[]</span> <span class="op">=</span> <span class="st">"ABCDEFGHIJ"</span><span class="op">;</span></span>
<span id="cb37-3"><a></a></span>
<span id="cb37-4"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb37-5"><a></a>  <span class="dt">int</span> fd<span class="op">;</span></span>
<span id="cb37-6"><a></a>  <span class="cf">if</span><span class="op">((</span>fd <span class="op">=</span> creat<span class="op">(</span><span class="st">"new_file2"</span><span class="op">,</span> <span class="bn">0644</span><span class="op">))</span> <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-7"><a></a>    perror<span class="op">(</span><span class="st">"new_file2"</span><span class="op">);</span> exit<span class="op">(-</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb37-8"><a></a>  <span class="op">}</span></span>
<span id="cb37-9"><a></a></span>
<span id="cb37-10"><a></a>  <span class="cf">if</span><span class="op">(</span>write<span class="op">(</span>fd<span class="op">,</span> buf1<span class="op">,</span> <span class="dv">10</span><span class="op">)</span> <span class="op">!=</span> <span class="dv">10</span><span class="op">)</span>       perror<span class="op">(</span><span class="st">"buf1"</span><span class="op">);</span>    <span class="co">// offset == 10</span></span>
<span id="cb37-11"><a></a>  <span class="cf">if</span><span class="op">(</span>lseek<span class="op">(</span>fd<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> SEEK_SET<span class="op">)</span> <span class="op">==</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span>    perror<span class="op">(</span><span class="st">"lseek"</span><span class="op">);</span>   <span class="co">// offset == 4</span></span>
<span id="cb37-12"><a></a>  <span class="cf">if</span><span class="op">(</span>write<span class="op">(</span>fd<span class="op">,</span> buf2<span class="op">,</span> <span class="dv">10</span><span class="op">)</span> <span class="op">!=</span> <span class="dv">10</span><span class="op">)</span>       perror<span class="op">(</span><span class="st">"buf2"</span><span class="op">);</span>    <span class="co">// offset == 14</span></span>
<span id="cb37-13"><a></a></span>
<span id="cb37-14"><a></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb37-15"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/escriure_fitxer2.c">sources/escriure_fitxer2.c</a></p>
</div>
</section></section>
<section>
<section id="punters" class="title-slide slide level1 center">
<h1>Punters</h1>

</section>
<section id="què-són-els-punters" class="slide level2 smaller">
<h2>Què són els punters?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<h3 id="concepte">Concepte</h3>
<ul>
<li class="fragment">Totes les dades (variables, constants,…) <strong>s’emmagatzemen</strong> des d’una determinada <strong>adreça de memòria</strong> i utilitzant tants <strong>bytes</strong> com sigui necessari.</li>
<li class="fragment">Un punter és una <strong>variable</strong> guardada en una <span class="alert">adreça de mèmoria</span> que conté un altra <strong>adreça de memòria</strong>.</li>
</ul>
</div><div class="column" style="width:45%;">
<h3 id="operadors">Operadors</h3>
<ul>
<li class="fragment"><strong>&amp;</strong>: Retorna l’adreça de l’apuntador. Per exemple <code>&amp;x</code> ens dóna l’adreça de la variable <code>x</code>.</li>
<li class="fragment"><strong>*</strong> Retorn el valor de la variable situada a l’adreça especificada pel seu operand (<strong>dereferencing</strong>).</li>
</ul>
</div></div>
<div class="fragment center-container">
<p>El valor que retorna l’operador <strong>&amp;</strong> depèn de la posició del seu operand i, per tant, no està sota el control del programador.</p>
</div>
</section>
<section id="com-funcionen-els-punters-i" class="slide level2">
<h2>Com funcionen els punters? (I)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb38-1"><a></a><span class="dt">int</span> main <span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span> argv<span class="op">[]){</span></span>
<span id="cb38-2"><a></a><span class="dt">int</span> s<span class="op">=</span><span class="dv">10</span><span class="op">,</span>n<span class="op">,</span>m<span class="op">;</span></span>
<span id="cb38-3"><a></a><span class="dt">int</span> <span class="op">*</span>ptr<span class="op">=&amp;</span>s<span class="op">;</span></span>
<span id="cb38-4"><a></a><span class="op">};</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>

<img data-src="../figures/slides/01-c/pointer1.png" style="width:60.0%" class="r-stretch"></section>
<section id="com-funcionen-els-punters-ii" class="slide level2">
<h2>Com funcionen els punters? (II)</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb39-1"><a></a><span class="dt">int</span> </span>
<span id="cb39-2"><a></a>main <span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> </span>
<span id="cb39-3"><a></a>    <span class="dt">char</span> <span class="op">*</span> argv<span class="op">[]){</span></span>
<span id="cb39-4"><a></a>    <span class="dt">int</span> s<span class="op">=</span><span class="dv">10</span><span class="op">;</span></span>
<span id="cb39-5"><a></a>    <span class="dt">float</span> f<span class="op">=</span><span class="fl">10.5</span><span class="op">;</span></span>
<span id="cb39-6"><a></a>    <span class="dt">char</span> a<span class="op">=</span><span class="ch">'a'</span><span class="op">;</span></span>
<span id="cb39-7"><a></a></span>
<span id="cb39-8"><a></a>    <span class="dt">int</span> <span class="op">*</span>pt1 <span class="op">=</span> <span class="op">&amp;</span>s<span class="op">;</span></span>
<span id="cb39-9"><a></a>    <span class="dt">float</span> <span class="op">*</span>pt2 <span class="op">=</span> <span class="op">&amp;</span>f<span class="op">;</span></span>
<span id="cb39-10"><a></a>    <span class="dt">char</span> <span class="op">*</span>pt3<span class="op">=</span> <span class="op">&amp;</span>a<span class="op">;</span></span>
<span id="cb39-11"><a></a><span class="op">};</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:60%;">
<p><img data-src="../figures/slides/01-c/pointer2.png" style="width:90.0%"></p>
</div></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/punters_diapos.c">sources/punters_diapos.c</a></p>
</div>
</section>
<section id="operacions-amb-punters-i" class="slide level2">
<h2>Operacions amb punters (I)</h2>
<ul>
<li class="fragment"><strong>Assignació (=)</strong>: Assigna una adreça a un punter.</li>
<li class="fragment"><strong>Comparació (==, !=)</strong>: Igualtat o desigualtat.</li>
<li class="fragment"><strong>Inicialització (NULL)</strong>: Indica que el punter no conté cap adreça.</li>
<li class="fragment"><strong>Increment (++), decrement (–)</strong>: Canviar un punter a l’element següent/anterior d’una sèrie (per exemple, una matriu).</li>
<li class="fragment"><strong>Indexat ([])</strong>: accés a l’element n d’una sèrie.</li>
</ul>
</section>
<section id="operacions-amb-punters-ii" class="slide level2">
<h2>Operacions amb punters (II)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb40-1"><a></a><span class="dt">int</span> n <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb40-2"><a></a><span class="dt">int</span> <span class="op">*</span>ptr1 <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb40-3"><a></a>ptr1 <span class="op">=</span> <span class="op">&amp;</span>n<span class="op">;</span></span>
<span id="cb40-4"><a></a><span class="op">(*</span>ptr1<span class="op">)++</span>        <span class="co">//Modifiquem el valor de la variable a la que apunta</span></span>
<span id="cb40-5"><a></a>ptr1<span class="op">++</span>           <span class="co">//Modifiquem l'adreça de memòria on apunta</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="pas-de-paràmetres-valor" class="slide level2">
<h2>Pas de paràmetres (valor)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb41-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb41-2"><a></a></span>
<span id="cb41-3"><a></a><span class="dt">int</span> sumar_per_valor<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb41-4"><a></a>    a <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb41-5"><a></a>    <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb41-6"><a></a><span class="op">}</span></span>
<span id="cb41-7"><a></a></span>
<span id="cb41-8"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb41-9"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">;</span><span class="dt">int</span> y <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb41-10"><a></a>    printf<span class="op">(</span><span class="st">"Abans de la crida per valor: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb41-11"><a></a>    <span class="dt">int</span> resultat <span class="op">=</span> sumar_per_valor<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb41-12"><a></a>    printf<span class="op">(</span><span class="st">"Després de la crida per valor: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb41-13"><a></a>    printf<span class="op">(</span><span class="st">"Resultat de la suma: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> resultat<span class="op">);</span></span>
<span id="cb41-14"><a></a></span>
<span id="cb41-15"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb41-16"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/pas_valor.c">sources/pas_valor.c</a></p>
</div>
</section>
<section id="pas-de-paràmetres-referència" class="slide level2">
<h2>Pas de paràmetres (referència)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb42-1"><a></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb42-2"><a></a></span>
<span id="cb42-3"><a></a><span class="dt">void</span> sumar_per_referencia<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb42-4"><a></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>a <span class="op">+</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb42-5"><a></a><span class="op">}</span></span>
<span id="cb42-6"><a></a></span>
<span id="cb42-7"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb42-8"><a></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">;</span> <span class="dt">int</span> y <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb42-9"><a></a>    printf<span class="op">(</span><span class="st">"Abans de la crida per referència: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb42-10"><a></a>    sumar_per_referencia<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb42-11"><a></a>    printf<span class="op">(</span><span class="st">"Després de la crida per referència: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb42-12"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb42-13"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/pas_referencia.c">sources/pas_referencia.c</a></p>
</div>
</section>
<section id="exemple-ordenació-dun-array" class="slide level2">
<h2>Exemple: Ordenació d’un array</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb43-1"><a></a><span class="dt">void</span> ordenar<span class="op">(</span><span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> ptr<span class="op">)</span></span>
<span id="cb43-2"><a></a><span class="op">{</span></span>
<span id="cb43-3"><a></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">,</span> t<span class="op">;</span></span>
<span id="cb43-4"><a></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb43-5"><a></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;</span> n<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb43-6"><a></a>            <span class="cf">if</span> <span class="op">(*(</span>ptr <span class="op">+</span> j<span class="op">)</span> <span class="op">&lt;</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">))</span> <span class="op">{</span></span>
<span id="cb43-7"><a></a>                t <span class="op">=</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb43-8"><a></a>                <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">)</span> <span class="op">=</span> <span class="op">*(</span>ptr <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb43-9"><a></a>                <span class="op">*(</span>ptr <span class="op">+</span> j<span class="op">)</span> <span class="op">=</span> t<span class="op">;</span></span>
<span id="cb43-10"><a></a>            <span class="op">}</span></span>
<span id="cb43-11"><a></a>        <span class="op">}</span></span>
<span id="cb43-12"><a></a>    <span class="op">}</span></span>
<span id="cb43-13"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="què-és-la-stack" class="slide level2 smaller">
<h2>Què és la <strong>Stack</strong>?</h2>
<p>És una estructura <strong>LIFO</strong> (Last-In,First-Out). La pila és una regió especial de memòria i la gestiona automàticament la CPU, de manera que no cal assignar ni desassignar memòria. La memòria de pila es divideix en trames successives on cada vegada que es crida una funció, s’assigna una nova trama de pila.</p>
<h3 id="característiques-de-la-stack">Característiques de la Stack</h3>
<ul>
<li class="fragment"><strong>Ordre seqüencial</strong>: Les variables s’empilen i desempilen en ordre seqüencial.</li>
<li class="fragment"><strong>Gestió automàtica</strong>: No cal que el programador assigni o alliberi memòria manualment.</li>
<li class="fragment"><strong>Limitació de mida</strong>: La pila és limitada, i si es supera el seu límit, es produeix un desbordament de pila.</li>
<li class="fragment"><strong>Variables locals</strong>: Les variables de la pila només existeixen mentre la funció està en execució.</li>
<li class="fragment"><strong>Eficient</strong>: L’accés a la memòria de la pila és molt ràpid, ja que segueix un ordre seqüencial i clar.</li>
</ul>
</section>
<section id="què-és-la-heap" class="slide level2 smaller">
<h2>Què és la <strong>Heap</strong>?</h2>
<p>La heap és una àrea de memòria on s’assigna memòria de manera dinàmica durant el temps d’execució. Aquesta memòria es gestiona a través de funcions específiques com <code>malloc()</code>, <code>calloc()</code> i <code>free()</code>, i és responsabilitat del programador garantir que la memòria s’alliberi quan ja no sigui necessària.</p>
<h3 id="característiques-de-la-heap">Característiques de la Heap</h3>
<ul>
<li class="fragment"><strong>Gestió manual</strong>: El programador ha de controlar l’assignació i alliberament de la memòria.</li>
<li class="fragment"><strong>Flexibilitat</strong>: És útil per a grans blocs de memòria o per a objectes que han de romandre en memòria més temps que una funció específica.</li>
<li class="fragment"><strong>Limitació per memòria física</strong>: La mida de la heap està limitada per la quantitat de memòria física disponible al sistema.</li>
<li class="fragment"><strong>Cost d’execució</strong>: Les operacions amb la heap són més lentes comparades amb la pila, a causa de la gestió dinàmica i la fragmentació.</li>
</ul>
</section>
<section id="exemple-heap-vs-stack" class="slide level2">
<h2>Exemple: Heap vs Stack</h2>
<div class="columns">
<div class="column" style="width:65%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb44-1"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span>     </span>
<span id="cb44-2"><a></a>    <span class="dt">int</span> y<span class="op">;</span>   </span>
<span id="cb44-3"><a></a>    <span class="dt">char</span> <span class="op">*</span>str<span class="op">;</span> </span>
<span id="cb44-4"><a></a>    y <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb44-5"><a></a>    printf<span class="op">(</span><span class="st">"stack memory: </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb44-6"><a></a>    str <span class="op">=</span> malloc<span class="op">(</span><span class="dv">100</span><span class="op">*</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">));</span> </span>
<span id="cb44-7"><a></a>    str<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="ch">'m'</span><span class="op">;</span></span>
<span id="cb44-8"><a></a>    printf<span class="op">(</span><span class="st">"heap memory:</span><span class="sc">%c\n</span><span class="st">"</span><span class="op">,</span> str<span class="op">[</span><span class="dv">0</span><span class="op">]);</span> </span>
<span id="cb44-9"><a></a>    free<span class="op">(</span>str<span class="op">);</span>         </span>
<span id="cb44-10"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb44-11"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:35%;">
<p><img data-src="../figures/slides/01-c/stackmemory.jpg"></p>
</div></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/zones_mem.c">sources/zones_mem.c</a></p>
</div>
</section>
<section id="stackoverflow" class="slide level2">
<h2>StackOverflow</h2>
<div class="columns">
<div class="column" style="width:40%;">
<h3 id="exemple">Exemple</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb45-1"><a></a><span class="dt">void</span> func<span class="op">()</span> <span class="op">{</span></span>
<span id="cb45-2"><a></a>    <span class="dt">int</span> vector<span class="op">[</span><span class="dv">1000</span><span class="op">];</span></span>
<span id="cb45-3"><a></a>    func<span class="op">();</span></span>
<span id="cb45-4"><a></a><span class="op">}</span></span>
<span id="cb45-5"><a></a></span>
<span id="cb45-6"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb45-7"><a></a>    func<span class="op">();</span></span>
<span id="cb45-8"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb45-9"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:60%;">
<h3 id="què-és-un-stackoverflow">Què és un StackOverflow?</h3>
<p>Un <strong>stack overflow</strong> es produeix quan la pila del programa supera la seva capacitat màxima. Això pot passar quan es criden funcions recursives de manera infinita o quan s’assignen grans quantitats de memòria a la pila.</p>
</div></div>
</section>
<section id="exemple-ordenar-amb-memòria-dinàmica-i" class="slide level2">
<h2>Exemple: Ordenar amb memòria dinàmica (I)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb46-1"><a></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb46-2"><a></a>    <span class="dt">int</span><span class="op">*</span> nums <span class="op">=</span> NULL<span class="op">;</span>  </span>
<span id="cb46-3"><a></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> max_elements <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> num<span class="op">;</span></span>
<span id="cb46-4"><a></a></span>
<span id="cb46-5"><a></a>    nums <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span>malloc<span class="op">(</span>max_elements <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb46-6"><a></a>    <span class="cf">if</span> <span class="op">(</span>nums <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb46-7"><a></a>        printf<span class="op">(</span><span class="st">"Error en l'assignació de memòria.</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb46-8"><a></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb46-9"><a></a>    <span class="op">}</span></span>
<span id="cb46-10"><a></a></span>
<span id="cb46-11"><a></a>    capta_dades<span class="op">(</span>n<span class="op">,</span> nums<span class="op">);</span></span>
<span id="cb46-12"><a></a>    ordenar<span class="op">(</span>n<span class="op">,</span> nums<span class="op">);</span></span>
<span id="cb46-13"><a></a>    free<span class="op">(</span>nums<span class="op">);</span></span>
<span id="cb46-14"><a></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb46-15"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="center-container">
<p>Fitxer: <a href="./01-sources/sources/ordenar.c">sources/pas_referencia.c</a></p>
</div>
</section>
<section id="exemple-ordenar-amb-memòria-dinàmica-ii" class="slide level2">
<h2>Exemple: Ordenar amb memòria dinàmica (II)</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb47"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb47-1"><a></a></span>
<span id="cb47-2"><a></a>capta_dades<span class="op">(</span><span class="dt">int</span> n<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> nums<span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-3"><a></a>  <span class="cf">while</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">"</span><span class="sc">%d</span><span class="st">"</span><span class="op">,</span> <span class="op">&amp;</span>num<span class="op">)</span> <span class="op">!=</span> EOF<span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-4"><a></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&gt;=</span> max_elements<span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-5"><a></a>      max_elements <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb47-6"><a></a>      <span class="dt">int</span><span class="op">*</span> temp <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span>realloc<span class="op">(</span>nums<span class="op">,</span> max_elements <span class="op">*</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb47-7"><a></a>      <span class="cf">if</span> <span class="op">(</span>temp <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb47-8"><a></a>        printf<span class="op">(</span><span class="st">"Error en l'assignació de memòria.</span><span class="sc">\n</span><span class="st">"</span><span class="op">);</span></span>
<span id="cb47-9"><a></a>        free<span class="op">(</span>nums<span class="op">);</span></span>
<span id="cb47-10"><a></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb47-11"><a></a>      <span class="op">}</span></span>
<span id="cb47-12"><a></a>      nums <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb47-13"><a></a>    <span class="op">}</span></span>
<span id="cb47-14"><a></a>  nums<span class="op">[</span>n<span class="op">]</span> <span class="op">=</span> num<span class="op">;</span></span>
<span id="cb47-15"><a></a>  n<span class="op">++;</span></span>
<span id="cb47-16"><a></a>  <span class="op">}</span></span>
<span id="cb47-17"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section></section>
<section>
<section id="structs-i-typedef" class="title-slide slide level1 center">
<h1>Structs i TypeDef</h1>

</section>
<section id="qué-són-els-structs" class="slide level2">
<h2>Qué són els structs?</h2>
<p>Una estructura és un tipus de dades derivats format per membres que són tipus de dades fonamentals o derivats. Una única estructura emmagatzemaria les dades d’un objecte. Una matriu d’estructures emmagatzemaria les dades de diversos objectes.</p>
<div class="columns">
<div class="column" style="width:45%;">
<h3 id="senser-reserva-espai-de-memòria">Senser reserva espai de Memòria</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb48-1"><a></a><span class="kw">struct</span> user <span class="op">{</span></span>
<span id="cb48-2"><a></a><span class="dt">int</span> pid<span class="op">;</span></span>
<span id="cb48-3"><a></a><span class="dt">char</span> <span class="op">*</span> name<span class="op">;</span></span>
<span id="cb48-4"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:45%;">
<h3 id="reservant-espai-de-memòria">Reservant espai de Memòria</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb49-1"><a></a><span class="kw">struct</span> user <span class="op">{</span></span>
<span id="cb49-2"><a></a><span class="dt">int</span> pid<span class="op">;</span></span>
<span id="cb49-3"><a></a><span class="dt">char</span> <span class="op">*</span> name<span class="op">;</span></span>
<span id="cb49-4"><a></a><span class="op">}</span> user<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
</section>
<section id="qué-són-els-typedef" class="slide level2">
<h2>Qué són els Typedef?</h2>
<p>Typedef s’utilitza per crear sinònims per a noms de tipus de dades definits prèviament.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb50-1"><a></a><span class="kw">typedef</span> <span class="dt">int</span> L<span class="op">;</span></span>
<span id="cb50-2"><a></a><span class="dt">int</span> a<span class="op">;</span></span>
<span id="cb50-3"><a></a>L a<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb51"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb51-1"><a></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb51-2"><a></a><span class="dt">int</span> pid<span class="op">;</span></span>
<span id="cb51-3"><a></a><span class="dt">char</span> <span class="op">*</span> name<span class="op">;</span></span>
<span id="cb51-4"><a></a><span class="op">}</span> User<span class="op">;</span> </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb52"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb52-1"><a></a>User user<span class="op">;</span></span>
<span id="cb52-2"><a></a>user<span class="op">.</span>name<span class="op">=</span><span class="st">"</span></span>
<span id="cb52-3"><a></a>Jordi Mateo<span class="st">";</span></span>
<span id="cb52-4"><a></a>user<span class="op">.</span>pid<span class="op">=</span><span class="dv">5000</span><span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb53"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb53-1"><a></a>User <span class="op">*</span> user1<span class="op">;</span></span>
<span id="cb53-2"><a></a>user1<span class="op">-&gt;</span>name<span class="op">=</span><span class="st">"Jack </span></span>
<span id="cb53-3"><a></a>sparrow<span class="st">";</span></span>
<span id="cb53-4"><a></a><span class="op">*(</span>user1<span class="op">).</span>pid<span class="op">=</span><span class="dv">5001</span><span class="op">;</span></span>
<span id="cb53-5"><a></a>User <span class="op">*</span>user2 <span class="op">=</span> <span class="op">&amp;</span>user<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div></div>
</section>
<section id="calculant-la-distancia-entre-2-punts" class="slide level2">
<h2>Calculant la distancia entre 2 punts</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb54"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb54-1"><a></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb54-2"><a></a>  <span class="dt">float</span> x<span class="op">;</span> <span class="dt">float</span> y<span class="op">;</span></span>
<span id="cb54-3"><a></a><span class="op">}</span> point <span class="op">;</span></span>
<span id="cb54-4"><a></a> </span>
<span id="cb54-5"><a></a><span class="dt">float</span> dist<span class="op">(</span> point A<span class="op">,</span> point B<span class="op">)</span> <span class="op">{</span></span>
<span id="cb54-6"><a></a>  <span class="cf">return</span><span class="op">(</span>sqrt<span class="op">((</span>A<span class="op">.</span>x <span class="op">-</span> B<span class="op">.</span>x<span class="op">)*(</span>A<span class="op">.</span>x <span class="op">-</span> B<span class="op">.</span>x<span class="op">)</span> <span class="op">+</span> <span class="op">(</span>A<span class="op">.</span>y <span class="op">-</span> B<span class="op">.</span>y<span class="op">)*(</span>A<span class="op">.</span>y <span class="op">-</span> B<span class="op">.</span>y<span class="op">)));</span></span>
<span id="cb54-7"><a></a><span class="op">}</span></span>
<span id="cb54-8"><a></a> </span>
<span id="cb54-9"><a></a><span class="dt">int</span> main<span class="op">(){</span></span>
<span id="cb54-10"><a></a>  <span class="dt">float</span> d<span class="op">;</span> point A<span class="op">,</span> B<span class="op">;</span></span>
<span id="cb54-11"><a></a>  printf<span class="op">(</span><span class="st">"The coordinates of the point A are: "</span><span class="op">);</span></span>
<span id="cb54-12"><a></a>  scanf<span class="op">(</span><span class="st">"</span><span class="sc">%f</span><span class="st"> </span><span class="sc">%f</span><span class="st">"</span><span class="op">,&amp;</span>A<span class="op">.</span>x<span class="op">,&amp;</span>A<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb54-13"><a></a>  printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">The coordinates of the point B are: "</span><span class="op">);</span></span>
<span id="cb54-14"><a></a>  scanf<span class="op">(</span><span class="st">"</span><span class="sc">%f</span><span class="st"> </span><span class="sc">%f</span><span class="st">"</span><span class="op">,&amp;</span>B<span class="op">.</span>x<span class="op">,&amp;</span>B<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb54-15"><a></a>  printf<span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">The distance between A and B is </span><span class="sc">%f\n</span><span class="st">"</span><span class="op">,</span> dist<span class="op">(</span>A<span class="op">,</span>B<span class="op">));</span></span>
<span id="cb54-16"><a></a>  exit <span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb54-17"><a></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="exercicis" class="slide level2">
<h2>Exercicis</h2>
<ol type="1">
<li class="fragment"><a href="../activities/unit00/01-debianbin.html">DebianBin</a></li>
</ol>
</section>
<section id="això-és-tot-per-avui" class="slide level2">
<h2>Això és tot per avui</h2>
<div class="columns">
<div class="column" style="width:60%;">
<h4 id="preguntes">Preguntes?</h4>
<p>Tot el codi i exemples addicionals els trobareu a la carpeta <code>01-sources</code> del repositori GitHub del curs.</p>
<p><br></p>
<h4 id="take-home-message">TAKE HOME MESSAGE</h4>
<p>El kernel de Linux s’ha escrit en C, per tant, és important conèixer aquest llenguatge de programació si volem entendre com funciona el sistema operatiu.</p>
</div><div class="column" style="width:40%;">
<p><img data-src="https://static.posters.cz/image/750/posters/looney-tunes-thats-all-folks-i295.jpg"></p>
</div></div>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../figures/corporative/institute.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Unitat 1 · Sistemes Operatius (SO) <a href="../index.html">🏠</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/os-gei-udl-2526-105012\.github\.io\/course\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>